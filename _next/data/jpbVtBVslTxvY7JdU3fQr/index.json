{"pageProps":{"posts":[{"meta":{"title":"github blog êµ¬ì¶•ê¸°(3)","desc":"mdxë¥¼ ì´ìš©í•œ í¬ìŠ¤íŒ… ì‘ì„±","date":"2024.02.06","tags":["next.js","github blog","gh-pages","mdx"]},"content":"\n# í¬ìŠ¤íŒ…ì˜ metaì •ë³´ ì…ë ¥\n\n- í¬ìŠ¤íŒ…ì˜ metaì •ë³´ë¥¼ í†µí•´ í¬ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ í‘œì¶œì‹œ ì •ë³´ë¥¼ í‘œì¶œí•´ì•¼ í•œë‹¤.\n\n![240207-232027](/posts/2024-02-06/240207-232027.png)\nê·¸ë¦¼1. .mdx ì˜ metaì •ë³´\n\n> getStaticPropsë¡œ postê°€ì ¸ì˜¤ê¸°\n\n```typescript\nimport fs from 'fs';\nimport matter from 'gray-matter';\nimport path from 'path';\n\nexport function getPostIds() {\n  const files = fs\n    .readdirSync(path.join('posts'))\n    .filter((filename) => filename.endsWith('.mdx'))\n    .map((filename) => filename.replaceAll('.mdx', ''));\n  return files;\n}\n\nexport function getPostById(postId: string) {\n  const markdownWithMeta = fs.readFileSync(\n    path.join('posts', postId + '.mdx'),\n    'utf-8'\n  );\n  const { data: meta, content } = matter(markdownWithMeta);\n  return {\n    meta: {\n      title: meta['title'] ?? '',\n      desc: meta['desc'] ?? '',\n      date: meta['date'] ?? '',\n      tags: meta['tags'] ?? [],\n    },\n    content,\n    fileName: postId,\n    route: postId,\n  };\n}\n\nexport const getStaticProps: GetStaticProps = async ({ params }) => {\n  const { postId = '' } = params ?? { postId: '' };\n  const postIds = getPostIds();\n  const idx = postIds.findIndex((_postId) => postId === _postId);\n  let prev = null,\n    post = null,\n    next = null;\n  for (let i = 0; i < postIds.length; i++) {\n    const _postId = postIds[i];\n    if (_postId === postId) {\n      prev = i === 0 ? null : getPostById(postIds[i - 1]);\n      post = getPostById(_postId);\n      next = i + 1 === postIds.length ? null : getPostById(postIds[i + 1]);\n      break;\n    }\n  }\n\n  return {\n    props: {\n      prev,\n      post,\n      next,\n    },\n  };\n};\n```\n\nroot folderì— posts í´ë”ë¥¼ ë§Œë“¤ê³  ê·¸ ë‚´ë¶€ì— í¬ìŠ¤íŠ¸ë“¤ì„ mdxíŒŒì¼ë¡œ ìƒì„±í•˜ê³ , ê·¸ íŒŒì¼ë“¤ì„ ì½ë„ë¡ í–ˆë‹¤.\n![240208-020424](/posts/2024-02-06/240208-020424.png)\nê·¸ë¦¼2. folder êµ¬ì¡° ë° posts í´ë”\n\nì´ë•Œ í´ë”ëª…ì€ í¬ìŠ¤íŠ¸ê°€ ì‘ì„±ëœ ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í–ˆê³ , ê·¸ ë‚ ì§œëŠ” mdx ë‚´ë¶€ì— ì ì–´ë†“ì€ metaì™€ ë™ì¼í•˜ê²Œ ë§ì¶”ì—ˆë‹¤.\n","fileName":"2024-02-06","route":"2024-02-06"},{"meta":{"title":"github blog êµ¬ì¶•ê¸°(2)","desc":"github pageë¥¼ ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ì•Œì•„ë³´ì","date":"2024.02.05","tags":["next.js","github blog","gh-pages","mdx"]},"content":"\n# ë¸”ë¡œê·¸ ê¸€ ì‘ì„± ë° í‘œì¶œí•˜ëŠ” ë°©ë²•ì€?\n\n- ê¸°ë³¸ì ìœ¼ë¡œ í¬ìŠ¤íŒ…ì€ markdownìœ¼ë¡œ ì‘ì„±í•˜ë„ë¡ í•˜ê³ ì‹¶ë‹¤.\n  - ì‘ì„± ê³¼ì •ì—ì„œ markdownìœ¼ë¡œ ê¸€ì„ í™•ì¸í•˜ê³ , ê·¸ëŒ€ë¡œ í‘œì¶œë˜ë„ë¡ í•˜ê³ ì‹¶ê¸° ë•Œë¬¸\n- ë³„ë„ ì„œë²„ ì—†ì´ ì‘ì„±í•œ post markdowníŒŒì¼ì„ githubì— ì €ì¥í•˜ê³ , ê·¸ê±¸ ê·¸ëŒ€ë¡œ í‘œì¶œ í•˜ê³ ì‹¶ë‹¤.\n\n=> mdx íŒŒì¼ë¡œ ì‘ì„±í•˜ê³ , meta ì •ë³´ë¥¼ parsingí•˜ì—¬ ê¸€ ëª©ë¡ì— í‘œì¶œí•˜ë„ë¡ í•˜ê³ , í‘œìŠ¤íŒ… ë‚´ìš©ì€ dynamic routingìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¡œ ì§œë„ë¡ í•˜ì!\n\n![240205-212509](/posts/2024-02-05/240205-212509.png)\nê·¸ë¦¼1. src í´ë” í•˜ë¶€ êµ¬ì¡°\n\nê¸°ë³¸ì ì¸ í´ë” êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ì´\n/pages í´ë” ë°‘ì— [postId].tsxë¥¼ ë‘ì–´ dynamic routingì´ ê°€ëŠ¥í•˜ë„ë¡ í–ˆë‹¤.\n\n# ë³¸ê²© github page ë°°í¬\n\n> gh-pages libraryë¥¼ ì‚¬ìš©!\n> [gh-pages npm repository](https://www.npmjs.com/package/gh-pages)\n\ngithub pageì— ë‚´ê°€ ì‘ì„±í•œ markdownì„ í¬ìŠ¤íŒ…ìœ¼ë¡œ í‘œì¶œí•˜ê¸° ìœ„í•´\ngh-pagesë¥¼ í™œìš©í•˜ë„ë¡ í•˜ê³  deploy ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì§°ë‹¤.\n\n```bash\n # package.json\n \"deploy\": \"next build && touch out/.nojekyll && gh-pages -d out --dotfiles\",\n```\n\nì´ì œ yarn deploy ëª…ë ¹ì–´ë¥¼ í†µí•´  \n ì—°ê²°í•œ git repositoryì˜ gh-pages ë¸Œëœì¹˜ì— ë¹Œë“œëœ ê²°ê³¼ë¬¼ì´ ì˜¬ë¼ê°€ê²Œ ëœë‹¤.  \n ì´ë•Œ github repository ì„¤ì •ì—ì„œ í‘œì¶œí•  branchë¥¼ gh-pagesë¡œ ë³€ê²½ì‹œì¼œì¤€ë‹¤.\n\n![240205-213613](/posts/2024-02-05/240205-213613.png)\nê·¸ë¦¼2. github repository settings\n\n![240205-213633](/posts/2024-02-05/240205-213633.png)\nê·¸ë¦¼3. gh-pages ë¸Œëœì¹˜ë¥¼ github page ë©”ì¸ë¸Œëœì¹˜ë¡œ ì´ìš©í•˜ë„ë¡ ë³€ê²½\n\nìœ„ì™€ê°™ì´ ì„¤ì •í–ˆë‹¤ë©´\nyarn deploy ëª…ë ¹ì–´ë¥¼ í†µí•´ github pageê°€ ë°°í¬ë¨ì„ ì•Œ ìˆ˜ ìˆë‹¤.\n","fileName":"2024-02-05","route":"2024-02-05"},{"meta":{"title":"github blog êµ¬ì¶•ê¸°(1)","desc":"ê¹ƒí—™ ë¸”ë¡œê·¸ ì œì‘ê³¼ í”„ë ˆì„ì›Œí¬ì˜ ì„ íƒ","date":"2024.02.04","tags":["next.js","github blog","gh-pages","mdx","ê¹ƒí—™ ë¸”ë¡œê·¸"]},"content":"\n# ì™œ ê¹ƒí—™ ë¸”ë¡œê·¸ë¡œ ì´ì‚¬ë¥¼ í–ˆë‚˜\n\nì´ì „ì—ëŠ” notionì„ ì¼ë‹¤. ë…¸ì…˜ ìì²´ ê¸°ëŠ¥ë„ ë§ê³ , ê¸€ ì‘ì„±ë„ í¸ë¦¬í–ˆì§€ë§Œ  \n ì§ì ‘ reactë¡œ ë¸”ë¡œê·¸ë¥¼ ê¾¸ë¯¸ê³ , ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ”ê²ƒë„ ì¬ë°Œì„ê²ƒ ê°™ì•„ ì´ì‚¬ë¥¼ ê²°ì‹¬í–ˆë‹¤.\n\n## ê¹ƒí—™ ë¸”ë¡œê·¸ ì œì‘ì„ ìœ„í•´ ê³ ë ¤í–ˆë˜ê²ƒ\n\n- static siteë¡œ ì œì‘í•˜ì—¬ ë³„ë„ì˜ ì„œë²„êµ¬ì¶•ì´ í•„ìš”ì—†ì–´ì•¼ í•œë‹¤.\n- React ë¬¸ë²•ì„ í™œìš©í•˜ì—¬ ì‘ì„±ì´ í¸ë¦¬í•˜ê³ , í–¥í›„ í™•ì¥ì—ë„ ìš©ì´í•´ì•¼ í•œë‹¤.\n- markdownì„ ì´ìš©í•´ ì‘ì„±ì´ ê°€ëŠ¥í•˜ê³ , í‘œì¶œì´ ë˜ì–´ì•¼ í•œë‹¤.\n\n## í”„ë ˆì„ì›Œí¬ì˜ ì„ íƒ\n\nê¹ƒí—˜ë¸”ë¡œê·¸ë¥¼ ì°¾ì•„ë³´ë‹ˆ next.js ì™€ gatsby ë‘ê°€ì§€ í”„ë ˆì„ì›Œí¬ë¥¼ ë§ì´ ì±„íƒí•˜ëŠ”ë“¯ í–ˆë‹¤.\nì‚¬ì‹¤ ë‘ê°€ì§€ë¥¼ ë³´ìë§ˆì next.jsë¡œ êµ¬ì¶•í•˜ê³  ì‹¶ì—ˆë‹¤.\nì• ì´ˆì— next.jsëŠ” ìµìˆ™í•˜ê¸°ë„ í•˜ê³ , ë³„ë‹¤ë¥¸ ëŸ¬ë‹ì»¤ë¸Œ ì—†ì´ ë¹ ë¥´ê²Œ êµ¬ì¶•í•˜ê³  ì‹¶ì—ˆê¸° ë•Œë¬¸ì´ë‹¤.\n\në”°ë¼ì„œ next.jsë¡œ ì„ íƒ!\n\n# ë³¸ê²©ì  ê¹ƒí—™í˜ì´ì§€ ì œì‘\n\n## github page ìƒì„±\n\nê¹ƒí—™í˜ì´ì§€ëŠ” https://{ê¹ƒí—™ì•„ì´ë””}.github.io í˜•íƒœë¡œ ì´ìš© í•  ìˆ˜ ìˆë‹¤.  \në”°ë¼ì„œ ì´ ì´ë¦„ìœ¼ë¡œ repositoryë¥¼ ìƒì„±í•œë‹¤.\n\n![240203-225036](/posts/2024-02-04/240203-225036.png)  \n( ê¹ƒí—™ì•„ì´ë”” ).github.io ë¡œ ë ˆí¬ì§€í† ë¦¬ ìƒì„±!!\n\n## next.js ìƒì„± ë° ì„¤ì •\n\n```bash\n$ npx create-next-app@latest\n```\n\n```mjs\n// next.config.mjs\nimport createMDX from '@next/mdx';\n\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  // static pageë“¤ë¡œë§Œ êµ¬ì„±í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ export ì„¤ì • ì¶”ê°€\n  output: 'export',\n  // github pageëŠ” ì •ì  í˜ì´ì§€ë¡œ êµ¬ì„±ë˜ê¸°ë•Œë¬¸ì— imageì— ëŒ€í•˜ optimizedë¥¼ êº¼ì¤€ë‹¤\n  images: {\n    unoptimized: false,\n  },\n  assetPrefix: '/',\n  pageExtensions: ['js', 'jsx', 'ts', 'tsx', 'md', 'mdx'],\n};\n\nconst withMDX = createMDX();\n\nexport default withMDX(nextConfig);\n```\n\nìœ„ì™€ê°™ì´ ì„¤ì •í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ github pageì— ì •ì  í˜ì´ì§€ë¡œ í‘œì¶œë  ìˆ˜ ìˆëŠ” ê¸°ë³¸ ì„¤ì •ì´ ë§ˆë¬´ë¦¬ëœë‹¤.\n","fileName":"2024-02-04","route":"2024-02-04"},{"meta":{"title":"ShadowDOMì— ëŒ€í•œ ì´í•´ì™€ í™œìš©","desc":"ShadowDOMì„ í™œìš©í•œ CSS ì€ë‹‰ê³¼ ê·¸ í™œìš©","date":"2024.02.03","tags":["shadow dom","ì‰ë„ìš° ë”","css ì€ë‹‰"]},"content":"\n# Shadow DOMì´ë€ ë¬´ì—‡ì¸ê°€?\n\n- cssom treeë¥¼ ë”°ë¡œ ê°€ì§€ëŠ” html element\n- [shadowDOM mdn ì„¤ëª… ë³´ëŸ¬ê°€ê¸°](https://developer.mozilla.org/ko/docs/Web/API/Web_components/Using_shadow_DOM)\n  ![240203-163855](/posts/2024-02-03/240203-163855.png)\n  ê·¸ë¦¼1. shadowDOM cssom treeêµ¬ì¡°ë„ ( ì¶œì²˜: mdn)\n\n  > shadow domì„ í™œìš©í•˜ë©´ shadow dom ë‚´/ì™¸ë¶€ì˜ cssê°€ ì„œë¡œ ê°„ì„­ì—†ì´ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤  \n  > ë§Œì•½ íŠ¹ì • dom elementê°€ ë‚´/ì™¸ë¶€ ì˜ cssì™€ ì—°ê´€ì—†ì´ ë™ì‘í•˜ë„ë¡ í•˜ê³  ì‹¶ë‹¤ë©´ shadowDOMì„ í™œìš©í•˜ë©´ ëœë‹¤\n\n  ```javascript\n  const openShadowRoot = (dom: HTMLElement) => {\n    if (dom?.shadowRoot) return dom.shadowRoot;\n    const shadowRoot = dom.attachSadow({\n      mode: 'open',\n    });\n    return shadowRoot;\n  };\n\n  const shadowRoot = openShadowRoot(document.querySelector('#root'));\n  console.log(shadowRoot);\n  ```\n\n  ìœ„ì™€ê°™ì´ shadow DOMìœ¼ë¡œ í™œìš©í•˜ê³ ì í•˜ëŠ” dom elementì— attachShadowë¥¼ í•´ì£¼ë©´\n  shadow-rootê°€ ì˜¤í”ˆëœë‹¤.\n  ![240203-164510](/posts/2024-02-03/240203-164510.png)\n  ![240203-164702](/posts/2024-02-03/240203-164702.png)\n\n  <hr />\n\n  ## shadowDOMì˜ í™œìš© ( React )\n\n  ì´ë ‡ê²Œ ë§Œë“  shadowDOMì„ ë¦¬ì•¡íŠ¸ í™˜ê²½ì—ì„œ í•œë²ˆ í™œìš©í•´ë³´ì\n\n```typescript\n// ShadowDOM.tsx\nimport { ReactNode, useRef, useState, ReactPortal, useEffect } from 'react';\nimport { createPortal } from 'react-dom';\n\nexport default function ShadowDOM({ children }: { children?: ReactNode }) {\n  const divRef = useRef<HTMLDivElement>(null);\n  const [portal, setPortal] = useState<ReactPortal | null>(null);\n\n  useEffect(() => {\n    if (!divRef.current || divRef?.current?.shadowRoot) return;\n    const shadowRoot =\n      divRef?.current?.shadowRoot ??\n      divRef.current.attachShadow({ mode: 'open' });\n    const _portal = createPortal(children, shadowRoot);\n    setPortal(_portal as ReactPortal);\n  }, [children]);\n\n  return <div ref={divRef}>{portal}</div>;\n}\n\n// Home.tsx\nimport ShadowDOM from '@/components/common/ShadowDOM';\n\nexport default function Home() {\n  return (\n    <ShadowDOM>\n      <style>\n        {'div { background-color: red; width: 200px; height: 300px;}'}\n      </style>\n      <div>home</div>\n    </ShadowDOM>\n  );\n}\n```\n\n![240203-182312](/posts/2024-02-03/240203-182312.png)\n![240203-182137](/posts/2024-02-03/240203-182137.png)\n\nìœ„ì™€ê°™ì´ home ì»´í¬ë„ŒíŠ¸ì˜ background-colorê°€ ì™¸ë¶€ì— ì „íŒŒë˜ì§€ ì•ŠëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n<iframe\n  width='300'\n  height='400'\n  src='/home'\n  frameborder='0'\n  allow='accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture'\n  allowfullscreen></iframe>\nì˜ˆì‹œ1. shadowDOMì„ í†µí•œ css ì€ë‹‰ í™”ë©´ (iframe)\n","fileName":"2024-02-03","route":"2024-02-03"},{"meta":{"title":"ë¸Œë¼ìš°ì €ì˜ ë Œë”ë§","desc":"ë¸Œë¼ìš°ì €ì˜ ë Œë”ë§ ìˆœì„œ","date":"2024.02.02","tags":["ë¸Œë¼ìš°ì €","ë Œë”ë§","CSSOM","AST"]},"content":"\n# ë¸Œë¼ìš°ì €ì˜ ë Œë”ë§ ìˆœì„œ\n\n1. HTML, CSS, Javascript, static files ë“±ì˜ ë¦¬ì†ŒìŠ¤ë¥¼ ìš”ì²­ í•˜ê³  ì‘ë‹µ ë°›ëŠ”ë‹¤.\n2. HTML, CSSë¥¼ íŒŒì‹±í•˜ì—¬ DOM, CSSOMì„ ìƒì„±í•˜ì—¬ ë Œë”íŠ¸ë¦¬ë¥¼ ìƒì„±í•œë‹¤.\n   1. DOM íŒŒì‹±\n      1. ì„œë²„ì—ì„œ HTMLì„ ë°”ì´íŠ¸(2ì§„ìˆ˜)í˜•íƒœë¡œ ì‘ë‹µë°›ëŠ”ë‹¤.\n      2. meta tagì˜ charset ì–´íŠ¸ë¦¬ë·°íŠ¸ë¥¼ í†µí•´ ì¸ì½”ë”© ë°©ì‹ì„ ì¸ì‹í•˜ê³  í•´ë‹¹ ì¸ì½”ë”© ë°©ì‹ìœ¼ë¡œ ë¬¸ìì—´ ì¹˜í™˜í•œë‹¤.\n      3. í•´ë‹¹ ë¬¸ìì—´ì„ ë¬¸ë²•ì  ìµœì†Œ ì˜ë¯¸ ë‹¨ìœ„ë¥¼ ê°–ëŠ” í† í°ìœ¼ë¡œ ë¶„í•´í•œë‹¤.\n      4. ë¶„í•´ëœ í† í°ì„ ê¸°ë°˜ìœ¼ë¡œ ë…¸ë“œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.\n      5. ìƒì„±ëœ ë…¸ë“œë“¤ì€ íŠ¸ë¦¬êµ¬ì¡°ë¡œ ë˜ì–´ìˆìœ¼ë©° ì´ëŸ¬í•œ êµ¬ì¡°ë¥¼ DOM(Document Obejct Model)ì´ë¼ê³  ë¶€ë¥¸ë‹¤.\n   2. CSSOM íŒŒì‹±\n      1. DOM ìƒì„±( HTML íŒŒì‹± )ì¤‘ link tagë¥¼ ë§Œë‚˜ë©´ DOM íŒŒì‹±ì„ ì¤‘ë‹¨í•œë‹¤.\n      2. linkíƒœê·¸ì— ì§€ì •ëœ href ë¡œ ìš”ì²­ì„ ë³´ë‚´ css íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œ í•œë‹¤.\n      3. ë‹¤ìš´ë°›ì€ cssíŒŒì¼ì„ DOMíŒŒì‹±ê³¼ ë™ì¼í•œ ê³¼ì •ì„ ê±°ì³ tree êµ¬ì¡°ì˜ ê°ì²´ë“¤ë¡œ ë§Œë“¤ê³  ê·¸ê²ƒì„ CSSOM(CSS Object Model)ì´ë¼ê³  ë¶€ë¥¸ë‹¤.\n   3. ë Œë”íŠ¸ë¦¬\n      1. DOMê³¼ CSSOMì„ ë Œë”íŠ¸ë¦¬ë¡œ ê²°í•©í•œë‹¤.\n      2. í™”ë©´ì— ë Œë”ë§ ë˜ì§€ ì•ŠëŠ” íƒœê·¸( = script, link ë° cssì— ì˜í•´ ë¹„í‘œì¶œ ë˜ëŠ” ë…¸ë“œë“¤)ì€ ì œì™¸ëœë‹¤.\n      3. ìƒì„±ëœ ë Œë”íŠ¸ë¦¬ëŠ” ìš”ì†Œë“¤ì˜ ë ˆì´ì•„ì›ƒ ê³„ì‚°ì— ì‚¬ìš©ë˜ë©° ì´ë¥¼ í†µí•´ í˜ì¸íŒ…ì„ ì‹¤í–‰í•œë‹¤.\n3. ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ íŒŒì‹±í•˜ì—¬ AST(Absctract Syntax Tree)ë¥¼ ìƒì„±í•˜ê³ , ë°”ì´íŠ¸ ì½”ë“œë¡œ ë³€í™˜í•˜ì—¬ ì‹¤í–‰í•œë‹¤.\n   1. ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ íŒŒì‹±\n      1. DOM ìƒì„± ê³¼ì •ì—ì„œ scriptíƒœê·¸ë¥¼ ë§Œë‚˜ë©´ DOM íŒŒì‹±ì„ ì¤‘ë‹¨í•˜ê³  jsë¥¼ íŒŒì‹±í•œë‹¤.\n      2. íŒŒì‹±ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„(V8, spiderMonkey, javaScriptCore ë“±)ì—ì„œ ì¼ì–´ë‚œë‹¤.\n      3. ì œì–´ê¶Œì„ ë„˜ê²¨ë°›ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ AST(Abstract Syntax Tree)ë¥¼ ìƒì„±í•œë‹¤.\n   2. ìë°”ìŠ¤í¬ë¦½íŠ¸ ì†ŒìŠ¤ íŒŒì‹±ì˜ ìˆœì„œ\n      1. í† í¬ë‚˜ì´ì§• : í† í¬ë‚˜ì´ì €ê°€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì†ŒìŠ¤ë¥¼ í† í° ë‹¨ìœ„ë¡œ ë¶„í•´í•œë‹¤.\n      2. íŒŒì‹± : í† í°ë“¤ì„ ë¶„ì„í•˜ì—¬ ASTë¥¼ ìƒí—Œí•œë‹¤.\n      3. ë°”ì´íŠ¸ì½”ë“œ ìƒì„± : ASTë¥¼ ì¸í„°í”„ë¦¬í„°ê°€ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë°”ì´íŠ¸ ì½”ë“œë¡œ ë³€í™˜ í•œë‹¤.\n         1. V8ì˜ ê²½ìš° ìì£¼ ì‹¤í–‰ë˜ëŠ” ì½”ë“œëŠ” í„°ë³´íŒ¬(ì»´íŒŒì¼ëŸ¬)ì— ì˜í•´ Optimized Machine Codeë¡œ ì»´íŒŒì¼ ë˜ì–´ ì„±ëŠ¥ ìµœì í™”ë¥¼ ì§„í–‰í•˜ë©°, ì‚¬ìš© ë¹ˆë„ê°€ ì ì–´ì§€ë§Œ Deoptimizingí•œë‹¤.\n      4. ì‹¤í–‰ : ì¸í„°í”„ë¦¬í„°ê°€ ë°”ì´íŠ¸ì½”ë“œë¥¼ ì½ì–´ ë¡œì§ì„ ì‹¤í–‰í•œë‹¤.\n4. ë Œë”íŠ¸ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ HTMLìš”ì†Œì˜ ë ˆì´ì•„ì›ƒì„ ê³„ì‚°í•˜ê³  ë¸Œë¼ìš°ì € í™”ë©´ì— í˜ì¸íŒ…í•œë‹¤.\n\n### Reference\n\n- ìë°”ìŠ¤í¬ë¦½íŠ¸ ë”¥ ë‹¤ì´ë¸Œ (38ì¥)\n","fileName":"2024-02-02","route":"2024-02-02"},{"meta":{"title":"Rail ëª¨ë¸","desc":"ë¸Œë¼ìš°ì € ì‚¬ìš©ì ê²½í—˜ì— ëŒ€í•œ ì§€í‘œ Railëª¨ë¸","date":"2024.02.01","tags":["Rail","ë¸Œë¼ìš°ì €","ë Œë”ë§","ì‚¬ìš©ì ê²½í—˜"]},"content":"\n# Rail ëª¨ë¸\n\n- Railì€ ë¸Œë¼ìš°ì €ì—ì„œì˜ ì„±ëŠ¥ì— ëŒ€í•´ ìƒê°í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ì‚¬ìš©ì£¼ ì¤‘ì‹¬ ì„±ëŠ¥ ëª¨ë¸\n- 4ê°€ì§€ ì›¹ì•±ì˜ ìƒëª…ì£¼ê¸°ë¥¼ í†µí•´ ì„±ëŠ¥ ì§€í‘œë¥¼ ë‚˜íƒ€ëƒ„(response, animation, idle, load)\n- êµ¬ì²´ì  ëª©í‘œì™€ ì§€ì¹¨ì„ ì§€ì •í•˜ì—¬ ì„±ëŠ¥ ì¸¡ì • í•­ëª©ìœ¼ë¡œ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ í•¨\n\n![240203-210333](/posts/2024-02-01/240203-210333.png)\n\nì¶œì²˜: https://web.dev/rail/#response-process-events-in-under-50ms\n\n# Railëª¨ë¸ì—ì„œ ë°”ë¼ë³¸ ì‚¬ìš©ì ê²½í—˜ì— ëŒ€í•œ ê¸°ì¤€\n\n| 0~16ms | - ì‚¬ìš©ìëŠ” ì´ˆë‹¹ 60ê°œì˜ í”„ë ˆì„ì´ ë Œë”ë§ë˜ëŠ”ê±¸ ë¶€ë“œëŸ½ë‹¤ê³  ì¸ì‹í•œë‹¤\n\n- ë¸Œë¼ìš°ì €ì—ì„œ ìƒˆ í”„ë ˆì„ì„ ê·¸ë¦¬ëŠ”ë°ëŠ” 16msê°€ ê±¸ë¦°ë‹¤.\n- | ì‚¬ìš©ìê°€ ì• ë‹ˆë©”ì´ì…˜ì´ ë§¤ìš° ë§¤ë„ëŸ½ë‹¤ê³  ëŠë‚Œ |\n  | ------------------------------------------ | ---------------------------------------------- |\n  | 0~100ms                                    | - ì´ ì •ë„ ì‘ë‹µì—ì„  ì¦‰ê°ì  ë°˜ì‘ì´ ì¼ì–´ë‚œë‹¤ ëŠë‚Œ |\n- í•˜ì§€ë§Œ ë” ê¸¸ì–´ì§€ë©´ ë™ì‘ â†” ì‘ë‹µ ì´ ëŠì–´ì§„ë‹¤ëŠ” ëŠë‚Œì„ ë°›ìŒ |\n  | 100~1,000ms | - ìì—°ìŠ¤ëŸ½ê³  ì§€ì†ì  ì‘ì—…ì˜ ì¼ë¶€ë¡œ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆëŠ” ìˆ˜ì¤€\n- ëŒ€ë¶€ë¶„ì˜ ì›¹ì•±ì˜ ìƒíƒœ |\n  | 1,000ms ~ 10,000ms | - 1ì´ˆë¥¼ ì´ˆê³¼í•˜ë¯€ë¼ ì‚¬ìš©ìëŠ” ì‘ì—…ì— ì§‘ì¤‘ì„ ìƒê²Œë¨ |\n  | 10,000ms ì´ìƒ | - ì‚¬ìš©ì ì´íƒˆ |\n\n# Response: 50ms ë¯¸ë§Œì˜ ì´ë²¤íŠ¸ ì²˜ë¦¬ ëª©í‘œ\n\n- ëª©í‘œ : ì‚¬ìš©ì ì…ë ¥ì— ëŒ€í•œ interactionì´ 100msì´ë‚´ì— ì™„ë£Œë˜ì–´ ì „ë‹¬ ë  ìˆ˜ ìˆë„ë¡(ì¦‰ê°ì ì´ë‹¤ëŠ” ëŠë‚Œ)\n- ì§€ì¹¨\n  - í„°ì¹˜, ìŠ¤í¬ë¡¤ë“± ì—°ê²°ë˜ëŠ” ë™ì‘ì€ ì œì™¸í•˜ê³ , í´ë¦­, í† ê¸€ë“±ì˜ ì´ë²¤íŠ¸ì— ì ìš©\n  - ë¦¬ì†ŒìŠ¤ê°€ ë§ì´ í•„ìš”í•œ ì‘ì—…ì´ë¼ë©´ ë°±ê·¸ë¼ìš´ë“œë¡œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡(ì‚¬ìš©ì ê²½í—˜ì„ ì°¨ë‹¨í•˜ì§€ ì•Šë„ë¡)\n  - 50msë¥¼ ë„˜ê¸°ëŠ” ì‘ë‹µì— ëŒ€í•´ì„  í”¼ë“œë°±ì„ ì œê³µí•  ìˆ˜ ìˆë„ë¡í•œë‹¤.\n\n> 100ms ì‘ë‹µì„ ìœ„í•´ì„  ê³ ì‘ 50msì˜ ì—¬ìœ ë§Œ ì¡´ì¬í•œë‹¤.\n\nëª©í‘œê°€ 100msì¸ ì‘ë‹µì„ ì£¼ë ¤ê³  í•  ë•Œ, ê°œë°œìì—ê²Œ ê°€ìš©í•œ ì‹œê°„ì€ 50msì— ë¶ˆê³¼í•˜ë‹¤.\n\nëª©í‘œí•˜ëŠ” taskì²˜ë¦¬ì™¸ì—ë„ ì…ë ¥ì— ëŒ€í•œ ì…ë ¥ì„ ìˆ˜ìš©í•˜ê³ , ì‘ë‹µì„ í‘œì¶œí•˜ê¸°ìœ„í•œ ì²˜ë¦¬ì‹œê°„ ë˜í•œ í•„ìš”í•˜ë¯€ë¡œ ì‹¤ì œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì‹œê°„ì€ 50msì •ë„!\n\n![240203-210345](/posts/2024-02-01/240203-210345.png)\n\nì¶œì²˜ : https://web.dev/rail/#response-process-events-in-under-50ms\n\n# Animation : 10msì•ˆì— í”„ë ˆì„ ìƒì„±\n\n- ëª©í‘œ\n  - ì• ë‹ˆë©”ì´ì…˜ì„ ê° 10ms í”„ë ˆì„ ì´í•˜ë¡œ ìƒì„±\n  - ê° í”„ë ˆì„ì˜ ìµœëŒ€ì˜ˆì‚°ì€ 16msì§€ë§Œ ë¸Œë¼ìš°ì €ê°€ í”„ë ˆì„ì„ ë Œë”ë§í•˜ëŠ” ì‹œê°„ì´ í•„ìš”í•˜ë¯€ë¡œ 10msë§Œ ê°€ìš©\n  - ì‹œê°ì  ë¶€ë“œëŸ¬ì›€ì´ ëª©í‘œ!\n- ì§€ì¹¨\n  - ì• ë‹ˆë©”ì´ì…˜ ì²˜ë¦¬ì™€ ê°™ì´ ë†’ì€ ì—°ì‚°ì´ í•„ìš”í•œ ì‘ì—…ì—ëŠ” ë‹¤ë¥¸ ì‘ì—…ì„ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.\n  - ìŠ¤í¬ë¡¤, ë¡œë“œí‘œì‹œ ì™€ ê°™ì€ ì‹œê°ì  ì• ë‹ˆë©”ì´ì…˜ë“±ì„ í¬í•¨í•˜ëŠ” ê°œë…ë“¤ì— ì ìš©\n  - ë Œë”ë§ ì„±ëŠ¥ì˜ ì›ë¦¬ëŠ” ì ê·¹ ì°¸ì¡°í•œë‹¤.\n\n# Idle: ìœ íœ´ì‹œê°„ ê·¹ëŒ€í™”\n\n- ëª©í‘œ\n  - idle timeì„ ìµœëŒ€í™”í•˜ì—¬ ì‚¬ìš©ìì˜ ì…ë ¥ì— 50msì´ë‚´ ì‘ë‹µí•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.\n- ì§€ì¹¨\n  - ì´ˆê¸° í˜ì´ì§€ ë¡œë“œë¥¼ ê°€ë³ê²Œ í•˜ê³ , ìœ íœ´ ì‹œê°„ì— ë‚˜ë¨¸ì§€ë¥¼ ë¡œë“œí•˜ë„ë¡ í•œë‹¤.\n  - 50msë¥¼ ë„˜ëŠ” ì‘ì—…ì€ ë‹¤ë¥¸ ì‚¬ìš©ì ì…ë ¥ì— ëŒ€í•œ ì‘ë‹µì— ë°©í•´ê°€ ë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ê·¸ ì´ë‚´ ì‹œê°„ì— í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.\n  - ìœ íœ´ ì‘ì—…ì¤‘ ì‚¬ìš©ì ì…ë ¥ì´ ìˆë‹¤ë©´, ìš°ì„ ìˆœìœ„ì— ë”°ë¼ ì‘ë™í•˜ë„ë¡ í•œë‹¤.\n\n# Load : ìµœëŒ€ 5ì´ˆ ì´ë‚´ ì½˜í…ì¸  ì „ë‹¬ í›„ ìƒí˜¸ì‘ìš© ì¤€ë¹„\n\n- ëª©í‘œ\n  - slow 3gìƒí™©ì—ì„œë„ 5ì´ˆ ì´ë‚´ì— ì½˜í…ì¸ ë¥¼ ì „ë‹¬í•˜ê³  ìƒí˜¸ì‘ìš©ì— ì¤€ë¹„í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.\n- ## ì§€ì¹¨\n\n# Rail ì¸¡ì •ë„êµ¬\n\n- chrome devtools\n- Lighthouse\n- WebPageTest\n\n# Referrence\n","fileName":"2024-02-01","route":"2024-02-01"},{"meta":{"title":"DOM","desc":"Document Object Modelì— ëŒ€í•œ ê³µë¶€","date":"2024.01.31","tags":["DOM","Document Object Model"]},"content":"\n# ë…¸ë“œ\n\n> HTMLìš”ì†Œì™€ ë…¸ë“œ ê°ì²´\n\n- HTMLìš”ì†Œ : HTMLë¬¸ì„œë¥¼ êµ¬ì„±í•˜ëŠ” ê°œë³„ ìš”ì†Œ\n  - HTMLìš”ì†Œì˜ êµ¬ì¡°\n    - ì‹œì‘íƒœê·¸(start tag)\n    - ì–´íŠ¸ë¦¬ë·°íŠ¸ ëª… (attribute name)\n    - ì–´íŠ¸ë¦¬ë·°íŠ¸ ê°’ (attribute value)\n    - ì½˜í…ì¸  (contents)\n- HTML ë¬¸ì„œëŠ” HTMLìš”ì†Œë“¤ì˜ ì§‘í•©ìœ¼ë¡œ ì´ë£¨ì–´ì§€ë©°, ìš”ì†Œë“¤ì€ ì¤‘ì²©ê´€ê³„ì— ì˜í•œ ë¶€ì ê´€ê³„ê°€ í˜•ì„±ëœë‹¤.\n\n> ë…¸ë“œ íƒ€ì…ì˜ ì¢…ë¥˜\n\n- ë¬¸ì„œ ë…¸ë“œ( document node )\n  - DOMíŠ¸ë¦¬ ìµœìƒì— ì¡´ì¬í•˜ëŠ” ë£¨íŠ¸ ë…¸ë“œ\n  - document ê°ì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.\n- ìš”ì†Œ ë…¸ë“œ (element node)\n  - HTMLìš”ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ” ê°ì²´\n- ì–´íŠ¸ë¦¬ë·°íŠ¸ ë…¸ë“œ (attribute node)\n  - HTMLìš”ì†Œì˜ attributeë¥¼ ê°€ë¦¬í‚¤ëŠ” ê°ì²´\n  - HTML ìš”ì†Œ ë…¸ë“œì˜ siblingê´€ê³„ë¥¼ ê°–ëŠ”ë‹¤.\n  - ë¶€ëª¨ ë…¸ë“œì— ì§ì ‘ ì—°ê²°ë˜ì§€ ì•Šê³ , element nodeì— í˜•ì œ ìš”ì†Œë¡œ ì—°ê²°ë˜ì–´ ìˆë‹¤. ë”°ë¼ì„œ attbitute ë…¸ë“œì— ì ‘ê·¼í•˜ë ¤ë©´ í•­ìƒ element nodeë¥¼ íƒ€ê³  ë“¤ì–´ì™€ì•¼ í•œë‹¤.\n- í…ìŠ¤íŠ¸ ë…¸ë“œ (text node)\n  - element nodeì˜ ìì‹ ë…¸ë“œì´ë©°, ìì‹ ë…¸ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ì—†ëŠ” ë¦¬í”„ ë…¸ë“œ\n\n> ë…¸ë“œ ê°ì²´ì˜ ìƒì†êµ¬ì¡°\n\në…¸ë“œê°ì²´ëŠ” HTMLë¬¸ì„œì˜ ê³„ì¸µì  êµ¬ì¡°ë¥¼ í‘œí˜„í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ” ê°ì²´ë¡œ, DOMì„ êµ¬ì„±í•˜ë©°, DOM APIë¥¼ í†µí•´ ìì‹ ì˜ êµ¬ì¡°ë‚˜ ì •ë³´ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.\n\në…¸ë“œ ê°ì²´ëŠ” ECMAScript í‘œì¤€ ì‚¬í•­ì´ì§€ë§Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë¹ŒíŠ¸ì¸ ê°ì²´ëŠ” ì•„ë‹ˆë‹¤. browser runtimeí™˜ê²½ì—ì„œ ì œê³µë˜ëŠ” browser ì „ìš© hostê°ì²´ë¡œ ë¶„ë¥˜ëœë‹¤.\n\n![240203-210458](/posts/2024-01-31/240203-210458.png)\n\nê·¸ë¦¼. ë…¸ë“œê°ì²´ì˜ ìƒì†êµ¬ì¡°(êµ¬ê¸€ ê²€ìƒ‰)\n\nìœ„ ê·¸ë¦¼ì—ì„œ ê°€ì¥ ìš°ì¸¡ì— ìˆëŠ” ìš”ì†Œ ê°ì²´ë“¤ì€ object~ HTMLElementê¹Œì§€ ì´ë¤„ì§€ëŠ” ëª¨ë“  ì¸í„°í˜ì´ìŠ¤ë“¤ì„ ìƒì†í•˜ëŠ” ìš”ì†Œ ê°ì²´ë¡œ ìƒìœ„ì— ìˆëŠ” ëª¨ë“  ìš”ì†Œë“¤ì˜ íŠ¹ì„±ì„ ì´ìš©í•  ìˆ˜ ìˆë‹¤.\n\nì´ë ‡ê²Œ ìƒì†êµ¬ì¡°í™” ëœ nodeë¥¼ ì´ìš©í•˜ì—¬ DOMê°ì²´ë¥¼ ìƒì„±í•˜ê³  DOM Apië¥¼ í†µí•´ HTMLì˜ ë‚´ìš©ì´ë‚˜ êµ¬ì¡°, ìŠ¤íƒ€ì¼ë“±ì„ ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.\n\n```jsx\nconst input = document.createElement('input');\n/*\n\tìµœí•˜ìœ„ node elementì¸ HTMLInputElementë¥¼ í†µí•´ DOMê°ì²´ë¥¼ ìƒì„±í•˜ê³  inputì´ë¼ëŠ” ë³€ìˆ˜ì— ë‹´ì€ í–‰ìœ„\n*/\n```\n\n> Element nodeì˜ í…ìŠ¤íŠ¸ ì¡°ì‘\n\n1. nodeValue\n\n   1. nodeValueëŠ” nodeì˜ í…ìŠ¤íŠ¸ ë…¸ë“œ(ë¦¬í”„ë…¸ë“œ)ì˜ valueë¥¼ ë°˜í™˜í•˜ëŠ” apië‹¤.\n\n   ```jsx\n   <div id='text'>hello</div>;\n   const hello = document.querySelector('#text');\n   console.log(hello.nodeValue); // null\n   console.log(hello.firstChild.nodeValue); // hello\n   ```\n\n2. textContent\n\n   1. getterì™€ setterê°€ ëª¨ë‘ ì¡´ì¬í•˜ëŠ” ì ‘ê·¼ì í”„ë¡œí¼í‹°.\n   2. textContentë¥¼ ì´ìš©í•˜ë©´ element node ì˜ contentsì˜ì—­ì— ìˆëŠ” ëª¨ë“  textë¥¼ ë°˜í™˜í•œë‹¤.(ë§ˆí¬ì—…ì€ ë¬´tì‹œ)\n   3. ```jsx\n      <div id='text'>\n        hello <span>world</span>\n      </div>;\n      const hello = document.querySelector('#text');\n      console.log(hello.textContent); // hello world\n      ```\n\n   4. element nodeì˜ textContentì— ë¬¸ìì—´ì„ í• ë‹¹í•´ë²„ë¦¬ë©´ contentsì˜ì—­ ì „ì²´ê°€ í•´ë‹¹ ë¬¸ìì—´ë¡œ ì¹˜í™˜ë˜ì–´ë²„ë¦°ë‹¤.\n   5. innerTextê°€ textContentì™€ ìœ ì‚¬í•˜ê²Œ ë™ì‘í•˜ì§€ë§Œ ì•„ë˜ì™€ ê°™ì€ ì´ìœ ë¡œ ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.\n      1. innerTextëŠ”cssì— ìˆœì¢…ì ì´ë‹¤ ì˜ˆë¥¼ ë“¤ì–´ cssì— ì˜í•œ ë¹„í‘œì‹œ(visibility : hidden)ì˜ ê²½ìš° ê°’ì„ ë°˜í™˜í•˜ì§€ ì•ŠëŠ”ë‹¤.\n      2. cssì— ëŒ€í•œ íƒìƒ‰ê¹Œì§€ ì´ë£¨ì–´ì ¸ì•¼ í•˜ë¯€ë¡œ textContentë³´ë‹¤ ëŠë¦¬ë‹¤.\n\n   > ì–´íŠ¸ë¦¬ë·°íŠ¸\n\n   HTMLì´ íŒŒì‹±ë  ë•Œ, HTMLìš”ì†Œì˜ ì–´íŠ¸ë¦¬ë·°íŠ¸ë“¤ì€ ì–´íŠ¸ë¦¬ë·°íŠ¸ ë…¸ë“œë¡œ ë³€í™˜ë˜ì–´ ìš”ì†Œ ë…¸ë“œì˜ í˜•ì œ ë…¸ë“œë¡œ ì¶”ê°€ëœë‹¤.\n\n   - HTMLì–´íŠ¸ë¦¬ë·°íŠ¸ vs DOMí”„ë¡œí¼í‹°\n     - ì–´íŠ¸ë¦¬ë·°íŠ¸ ë…¸ë“œ ë˜í•œ DOM ê°ì²´ë¡œ ìƒì„±ë˜ë©° ì´ë•Œ ì–´íŠ¸ë¦¬ë·°íŠ¸ ë…¸ë“œë“¤ì€ í•´ë‹¹ DOMì˜ í”„ë¡œí¼í‹°ë¡œ ì§€ì •ë˜ê³ , ì´ í”„ë¡œí¼í‹°ë“¤ì€ ì´ˆê¹ƒê°’ìœ¼ë¡œ ì–´íŠ¸ë¦¬ë·°íŠ¸ì˜ ê°’ì„ ê°–ëŠ”ë‹¤.\n     - ë”°ë¼ì„œ DOM í”„ë¡œí¼í‹°ì— ê°’ì„ í• ë‹¹í•´ë„ ì–´íŠ¸ë¦¬ë·°íŠ¸ ë…¸ë“œì˜ ê°’ì€ ë°”ë€Œì§€ ì•ŠëŠ”ë‹¤.\n     - ![240203-210509](/posts/2024-01-31/240203-210509.png)\n     - DOM í”„ë¡œí¼í‹°ì— ê°’ì„ í• ë‹¹í•œë‹¤ëŠ”ê²ƒì€ HTMLìš”ì†Œì˜ ìµœì‹  ìƒíƒœê°’ì„ ë³€ê²½í•˜ëŠ”ê²ƒ!\n   - HTML ì–´íŠ¸ë¦¬ë·°íŠ¸ â†” DOM í”„ë¡œí¼í‹°ì˜ ëŒ€ì‘ê´€ê³„\n     - id attribute ì™€ id property ëŠ” 1ëŒ€1ëŒ€ì‘\n     - value attribute â‡’ ì´ˆê¹ƒê°’, value property â‡’ ìµœì‹ ê°’\n     - class attribute â‡’ className, classListì™€ ëŒ€ì‘\n     - for attribute â‡’ htmlFor í”„ë¡œí¼í‹°ì™€ 1ëŒ€1 ëŒ€ì‘\n     - tdìš”ì†Œì˜ colspan attributeëŠ” ëŒ€ì‘í•˜ëŠ” í”„ë¡œí¼í‹° ì—†ìŒ\n     - textContent í”„ë¡œí¼í‹°ëŠ” ëŒ€ì‘í•˜ëŠ” ì–´íŠ¸ë¦¬ë·°íŠ¸ ì—†ìŒ\n     - attributeëŠ” ëŒ€ì†Œë¬¸ìx, propertyëŠ” ì¹´ë©œì¼€ì´ìŠ¤\n     -\n\n# ë ˆí¼ëŸ°ìŠ¤\n\n1. ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ deep dive(p.677)\n","fileName":"2024-01-31","route":"2024-01-31"},{"meta":{"title":"V8ì—”ì§„ êµ¬ë™ ìˆœì„œ","desc":"V8ì—”ì§„ì˜ êµ¬ë™ ìˆœì„œì— ëŒ€í•œ ê³µë¶€","date":"2024.01.30","tags":["V8","AST","ë¸Œë¼ìš°ì €"]},"content":"\n> v8ì—”ì§„ êµ¬ë™ ìˆœì„œ\n\n1. ì†ŒìŠ¤ì½”ë“œ íŒŒì‹±\n2. AST(Abstract Syntax Tree) ì¶”ìƒ êµ¬ë¬¸ íŠ¸ë¦¬ë¡œ ë³€í™˜ â†’ ì»´íŒŒì¼ëŸ¬ë“¤ì´ ì´ìš©í•˜ëŠ” ìë£Œêµ¬ì¡°\n3. ìë°”ìŠ¤í¬ë¦½íŠ¸ ë°”ì´íŠ¸ì½”ë“œë¡œ ë³€í™˜(ì¸í„°í”„ë¦¬í„° Ignition ì´ìš©)\n   1. Ignition : v8ë¶€í„° ì´ìš©ë˜ëŠ” ì¸í„°í”„ë¦¬í„°ë¡œ ì´ì „ì˜ Full-codegen(ì¸í„°í”„ë¦¬í„°)ë¥¼ ëŒ€ì²´í•œë‹¤.\n\n      (ì¸í„°í”„ë¦¬í„° : ì†ŒìŠ¤ì½”ë“œë¥¼ ë°”ë¡œ ì‹¤í–‰í•˜ëŠ” í™˜ê²½ )\n4. ë°”ì´íŠ¸ ì½”ë“œ ì‹¤í–‰\n   1. ìì£¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œëŠ” TurboFanìœ¼ë¡œ ë³´ë‚´ ìµœì í™”ëœ ì½”ë“œë¡œ ì¬ì»´íŒŒì¼(Optimized Machine Code)\n   2. ì‚¬ìš©ë¥ ì´ ë–¨ì–´ì§€ë©´ deoptimized\n5.\n\n> ë ˆí¼ëŸ°ìŠ¤\n\n- https://evan-moon.github.io/2019/06/28/v8-analysis/\n","fileName":"2024-01-30","route":"2024-01-30"},{"meta":{"title":"GraphQLì€ ë¬´ì—‡ì¸ê°€","desc":"GraphQLì— ëŒ€í•œ ê³µë¶€","date":"2024.01.29","tags":["Graph QL","ê·¸ë˜í”„ íì—˜"]},"content":"\n> GraphQLì´ë€\n\n<aside>\nğŸ’¡ GraphQLì€ ì¿¼ë¦¬ì–¸ì–´ì´ì ì„œë²„ì¸¡ ëŸ°íƒ€ì„\n\n</aside>\n\nê·¸ë˜í”„ íì—˜ì€ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì¿¼ë¦¬ë¥¼ ì´ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.\n\n> runtime\n\ngraphQL apiëŠ” ì„œë²„ì—ì„œ runtimeì— ì‹¤í–‰ëœë‹¤.\n\në°ì´í„°ì˜ ì¶œì²˜ì— êµ¬ì• ë°›ì§€ ì•Šê³  runtimeì— ë°ì´í„° íŒ¨ì¹­ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n> GraphQL êµ¬í˜„ ìˆœì„œ\n\n1. GraphQL schema design\n2. resolver â†”Â data source connection\n3. GraphQL query fetching\n\n> GraphQL ì˜ íŠ¹ì§•\n\n1. ì„±ëŠ¥\n   1. ì˜¤ë²„íŒ¨ì¹­ ë°©ì§€\n   2. ì–¸ë”íŒ¨ì¹­ ë°©ì§€: rest APIì˜ ê²½ìš° ì„œë¡œ ë‹¤ë¥¸ schema ë˜ëŠ” data sourceì˜ ê²½ìš° ì—¬ëŸ¬ë²ˆì˜ apiì½œë¡œ ê°ê° ì–¸ë”íŒ¨ì¹­ëœ ë°ì´í„°ë¥¼ front-sideì—ì„œ ì¡°í•©í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. graphQLì€ ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•´ì¤€ë‹¤.\n2. ê°œë°œì í¸ì˜ì„±\n   1. ê³„ì¸µì  ìŠ¤í‚¤ë§ˆ êµ¬ì¡°: ê·¸ë˜í”„ êµ¬ì¡°ì™€ ì„ ì–¸ì  êµ¬ì¡°ë¥¼ í†µí•´ ì¿¼ë¦¬ë¥¼ ì§ê´€ì ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆë‹¤.\n   2. íƒ€ì… ì•ˆì •ì„±: graphQLì€ ê·¸ ìì²´ë¡œ ìŠ¤í‚¤ë§ˆ êµ¬ì¡°ë¥¼ ê°€ì§€ë¯€ë¡œ í”„ë¡ íŠ¸ ì‚¬ì´ë“œì™€ ì„œë²„ ì‚¬ì´ë“œì˜ íƒ€ì…ì´ ìƒí˜¸ ë™ì¼í•´ì•¼ë§Œ í†µì‹ ì´ ê°€ëŠ¥í•˜ë¯€ë¡œ ê·¸ ìì²´ë¡œ íƒ€ì…ì•ˆì •ì„±ì„ ë³´ì¥í•œë‹¤.\n3. êµ¬ì¡°\n   1. í´ë¼ì´ì–¸íŠ¸ ê°œë°œì˜ ì„œë²„ ì˜ì¡´ì„± ë¶„ë¦¬: restAPIì²˜ëŸ¼ ì„œë²„ì‚¬ì´ë“œì—ì„œ ì›í•˜ëŠ” APIë¥¼ ê°œë°œí•´ ì¤„ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•˜ëŠ” ì—…ë¬´ì˜ì¡´ì„±ì„ ì—†ì•¨ ìˆ˜ ìˆë‹¤.\n   2. ë‹¨ì¼ ì •ë³´ì¶œì²˜: í”„ë¡ íŠ¸ ì‚¬ì´ë“œì—ì„  ë°ì´í„°ë“¤ ë§ˆë‹¤ APIë¥¼ ì–¸ë”íŒ¨ì¹­í•˜ì—¬ ì¡°í•©í•˜ë˜ restAPIì™€ ë‹¬ë¦¬ ì¡°í•©ì´ ë˜ì–´ ë¶ˆë ¤ì˜¤ë„ë¡ í•˜ëŠ” ë‹¨ì¼ ì¶œì²˜ë§Œ ì•Œë©´ëœë‹¤.\n4. í›Œë¥­í•œ ì»¤ë®¤ë‹ˆí‹°\n   1. í›Œë¥­í•œ ë„êµ¬ë“¤: apollo client, apollo studio ë“± ë‹¤ì–‘í•œ ë„êµ¬ë“¤ì´ ì™„ë¹„ë˜ì–´ìˆë‹¤.\n   2. ê´‘ë²”ìœ„í•œ ì´ìš©: ì—¬ëŸ¬ ì‚¬ì´íŠ¸ ë“¤ì—ì„œ graphQLì„ ì´ìš©ì¤‘ì´ë‹¤.\n","fileName":"2024-01-29","route":"2024-01-29"},{"meta":{"title":"ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ tkdodo blog ê¸€ ë²ˆì—­","desc":"ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ê³µì‹ ì‚¬ì´íŠ¸ì— ìˆëŠ” ë¸”ë¡œê·¸ ê¸€ì„ ìŠ¤í„°ë””í•˜ì—¬ ê³µìœ ","date":"2024.01.28","tags":["react query","ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬"]},"content":"\nApollo Clientì˜ ë“±ì¥ìœ¼ë¡œ fetch library( ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ )ê°€ reduxì™€ ê°™ì€ ì „ì—­ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ê²¬ì´ í™•ì‚°ë˜ì—ˆë‹¤.\n\n# # 1. ì‹¤ìš©ì  ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬\n\n> í´ë¼ì´ì–¸íŠ¸ ìƒíƒœ VS ì„œë²„ ìƒíƒœ\n\nApolloëŠ” data fetching ë¿ë§Œ ì•„ë‹ˆë¼ ì„œë²„ì—ì„œ ë³´ë‚¸ ë°ì´í„°( fetchingí•´ì˜¨ ì„œë²„ ë°ì´í„° )ì— ëŒ€í•œ ìºì‹œ ê¸°ëŠ¥ê¹Œì§€ ì œê³µí•œë‹¤. ì¦‰ useQuery hookì„ ì‚¬ìš©í•˜ì—¬ fetchingí•œ í›„ ìºì‹±ëœ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ Componentì—ì„œ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤.\n\nì´ì „ì˜ í´ë¼ì´ì–¸íŠ¸ ì•±ë“¤ì€ ì„œë²„ì˜ ìƒíƒœ( í‘œì‹œí•˜ê³ ì í•˜ëŠ” ë°ì´í„° )ë¥¼ ì†Œìœ í•˜ì§€ ì•Šê³ , ê°€ì¥ ìµœì‹ ì˜ ìë£Œë¥¼ ê°€ì ¸ì™€ì„œ í‘œì¶œí•˜ëŠ”ë° ê·¸ì¹˜ê³  ìˆì—ˆë‹¤. í•­ìƒ ë°ì´í„°ì˜ ì†Œìœ ìëŠ” ì„œë²„ì˜€ë‹¤.\n\n> React-Query\n\në¦¬ì•¡íŠ¸ ì¿¼ë¦¬ëŠ” Fronet-endë‹¨ì—ì„œë„ data fetchingê³¼ loading, error stateë¥¼ í¬í•¨í•œ ìƒíƒœ ì „ì—­ì„ ë‹¨ìˆœí•˜ê²Œ ê´€ë¦¬í•˜ë„ë¡ í•˜ê³ ì í–ˆë‹¤. REST apiì²˜ëŸ¼\n\nreact-queryëŠ” refetchOnWindowFocusë¥¼ í†µí•´ ë‹¤ë¥¸ ì°½ì— ê°”ë˜ focusê°€ ë‹¤ì‹œ ëŒì•„ì˜¤ë©´ ì„œë²„ì— ë°ì´í„°ë¥¼ ìš”ì²­í•˜ì—¬ ìµœì‹ ìƒíƒœì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤. ì´ë¥¼ í†µí•´ íŠ¸ë¦¬ê±°ëœ Componentì˜ í‘œì¶œëœ ë°ì´í„°ê°€ ë³€ê²½ë˜ë©° ì´ ëª¨ë“  ê³¼ì •ì€ loading spinnerê°€ ì—†ì´ ìë™ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.\n\n1. StaleTime: query dataê°€ ìµœì‹ (fresh) â†’ ì˜¤ë˜ëœ(stale)ìƒíƒœê°€ ë˜ëŠ”ë° ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ëœ»í•©ë‹ˆë‹¤. ì¿¼ë¦¬ì˜ ë°ì´í„°ê°€ ìµœì‹ ì´ë¼ê³  íŒë‹¨ë  ê²½ìš° í•­ìƒ cacheì— ìˆëŠ” ë°ì´í„°ë§Œì„ í‘œì¶œí•˜ë„ë¡ í•©ë‹ˆë‹¤( ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ì—†ì´ )\n2. CacheTime: ë¹„í™œì„± ì¿¼ë¦¬ê°€ ìºì‹œì—ì„œ ì œê±° ë ë•Œê¹Œì§€ì˜ ì‹œê°„ì„ ëœ»í•©ë‹ˆë‹¤(default = 5min). í•´ë‹¹ ì¿¼ë¦¬ì— ë“±ë¡ëœ ê´€ì°°ì(observer)ê°€ ì—†ëŠ” ê²½ìš° ì¦‰ì‹œ ì¿¼ë¦¬ê°€ ë¹„í™œì„± ìƒíƒœê°€ ë©ë‹ˆë‹¤.\n\nâ‡’ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° staleTimeì„ ì¡°ì •í•˜ë„ë¡í•˜ê³ , cacheTimeì€ ì¡°ì •í•  í•„ìš”ê°€ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.\n\n# # 2. ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì˜ ë°ì´í„° ë³€í™˜\n\n> ë°ì´í„°ì˜ ë³€í™˜\n\nRESTë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ, í™”ë©´ì— í‘œì¶œí•˜ê¸° ìœ„í•œ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ê°€ê³µí•  ìˆ˜ ìˆëŠ” ì§€ì ì€ 3 + 1êµ°ë°ê°€ ì¡´ì¬í•œë‹¤.\n\n1. back-end ( +1ì— í•´ë‹¹í•˜ë©° front-endì˜ ë‹´ë‹¹ì´ ì•„ë‹Œ êµ¬ì—­)\n   1. ë°±ì—”ë“œë‹¨ì—ì„œ ì• ì´ˆì— í•„ìš”í•œ ë°ì´í„° í˜•íƒœë¡œ ê°€ê³µí•˜ì—¬ ë°ì´í„°ë¥¼ ì „ë‹¬í•´ì£¼ëŠ” ë°©ë²•\n   2. ì¥ì \n      1. í‘œì¶œì— ì™„ì „íˆ ë¶€í•©í•˜ëŠ” í˜•íƒœ ê·¸ëŒ€ë¡œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.\n   3. ë‹¨ì \n      1. í”„ë¡ íŠ¸ì•¤ë“œì˜ ì˜ì—­ì´ ì•„ë‹ˆë‹¤\n2. queryFn\n   1. useQuery(${QUERY_KEY}, ${queryFn})\n      1. ì—¬ê¸°ì„œ queryFnì„ í†µí•´ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ì—¬ cacheì— ì €ì¥í•  ìˆ˜ ìˆë‹¤.\n   2. ì¥ì \n      1. ë°ì´í„° ì²˜ë¦¬ ìœ„ì¹˜ê°€ ë°±ì—”ë“œì— ê°€ê¹ë‹¤ ( front-end component â†”Â cache â†”Â back-end )\n   3. ë‹¨ì \n      1. fetchingì„ í†µí•´ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ queryFnì—ì„œ ê°€ê³µí•˜ì—¬ cacheì— ì €ì¥í•˜ë¯€ë¡œ ì›ë˜ fetchingí•´ì˜¨ ë°ì´í„° ì›í˜•ì„ ë‚˜ì¤‘ì— ë‹¤ì‹œ í™•ì¸í•  ìˆ˜ ì—†ë‹¤.\n3. Render\n   1. react component renderë‹¨ìœ„ì—ì„œ í•´ë‹¹ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ëŠ” ë°©ë²•\n   2. ì¥ì \n      1. useMemoë¥¼ í†µí•´ ìµœì í™”ê°€ ê°€ëŠ¥í•˜ë‹¤.\n   3. ë‹¨ì \n      1. ë°ì´í„°ì˜ ì •í™•í•œ êµ¬ì¡°ë¥¼ devtoolsë¥¼ í†µí•´ í™•ì¸í•˜ê¸°ê°€ ì–´ë µë‹¤\n      2. êµ¬ë¬¸ì´ ë³µì¡í•˜ë‹¤\n4. ì„ íƒ ì˜µì…˜\n   1. useQuery( ${QUERY_KEY}, ${queryFn}, ${select_option} )ì—ì„œ select_option ê°ì²´ì—ì„œ selectí”„ë¡œí¼í‹°ì— ë°ì´í„° ì •ì œë¥¼ ì§€ì •í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n   2. ì¥ì \n      1. ë°ì´í„°ì˜ ì›í˜•ì„ ì €ì¥í•´ë†“ê³  í•„ìš”ì— ë”°ë¼ ì •ì œí•˜ì—¬ ì“¸ ìˆ˜ ìˆë‹¤\n      2. ìœ„ 3ê°€ì§€ ì¤‘ ê°€ì¥ ì¢‹ì€ ë°©ì‹ìœ¼ë¡œ ê³ ë ¤ëœë‹¤.\n\n# # 3. ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì˜ ë Œë”ë§ ìµœì í™”\n\n> isFetching ì „í™˜\n\nuseQueryë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ê²½ìš° isFetching ìƒíƒœê°€ true â†’ falseë¡œ ë³€í™˜ë˜ëŠ” ê³¼ì •ì—ì„œ 2ë²ˆì˜ ë Œë”ë§ì„ ê±°ì¹˜ê²Œ ëœë‹¤.\n\n> notifyOnChangeProps: â€˜dataâ€™\n\nì´ëŸ¬í•œ ë‚­ë¹„ë¥¼ ì¤„ì´ê¸° ìœ„í•´ select option ê°ì²´ì— notifyOnChangeProps í”„ë¡œí¼í‹°ì— â€˜dataâ€™ë¥¼ ê°’ìœ¼ë¡œ ì£¼ì–´ ì‹¤ì œì ìœ¼ë¡œ ë°ì´í„°ê°€ ë³€í™˜ë˜ì—ˆì„ ê²½ìš°ì—ë§Œ ë Œë”ë§ì´ ì¼ì–´ë‚˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.\n\n> ë™ê¸°í™”ìœ ì§€\n\nê·¸ëŸ¬ë‚˜ ìœ„ì™€ê°™ì´ dataê°’ë§Œì„ íŠ¸ë¦¬ê±°ë¡œ ë°ì´í„°ì˜ í‘œì¶œì„ í•˜ê²Œ ë  ê²½ìš° í•´ë‹¹ fetchingì´ errorì¼ ê²½ìš°ì— ëŒ€í•œ í‘œì¶œ ì—¬ë¶€ë¥¼ íŠ¸ë¦¬ê±° í•  ìˆ˜ ì—†ë‹¤.\n\n```jsx\n// ğŸš¨ will track all fields\nconst { isLoading, ...queryInfo } = useQuery(...)\n\n// âœ… this is totally fine\nconst { isLoading\n```\n\n```jsx\n\nconst queryInfo = useQuery(...)\n\n// ğŸš¨ will not corectly track data\nReact.useEffect(() => {\n    console.log(queryInfo.data)\n})\n\n// âœ… fine because the dependency array is accessed during render\nReact.useEffect(() => {\n    console.log(queryInfo.data)\n}, [queryInfo.data])\n```\n\n> êµ¬ì¡° ê³µìœ \n\n```jsx\n[\n  { id: 1, name: 'Learn React', status: 'active' },\n  { id: 2, name: 'Learn React Query', status: 'todo' },\n];\n```\n\n```jsx\n[\n  -{ id: 1, name: 'Learn React', status: 'active' },\n  +{ id: 1, name: 'Learn React', status: 'done' },\n  { id: 2, name: 'Learn React Query', status: 'todo' },\n];\n```\n\nìœ„ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œ todo ë¦¬ìŠ¤íŠ¸ê°€ ìˆì—ˆê³ , ê·¸ ì¤‘ì—ì„œ idê°€ 1ì¸ todoì˜ ë°ì´í„°ê°€ ë³€ê²½ë˜ì—ˆì„ ê²½ìš° react-queryëŠ” ë‚˜ë¨¸ì§€ ë°ì´í„° ( id = 2 )ì˜ ë°ì´í„°ëŠ” ì´ì „ì˜ ì°¸ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•œë‹¤. ë”°ë¼ì„œ idê°€ 2ì¸ todoë¥¼ ì°¸ì¡°í•˜ëŠ” ( ex : select optionì„ ì´ìš©) componentëŠ” idê°€ 1ì¸ todoì˜ ë°ì´í„°ê°€ ë³€ê²½ë˜ì—ˆì–´ì„œ re-renderingë˜ì§€ ì•ŠëŠ”ë‹¤.\n\ní•˜ì§€ë§Œ í•´ë‹¹ query-keyì— ì €ì¥ëœ ë°ì´í„°ê°€ ì•„ì£¼ í´ ê²½ìš° JSON ì§ë ¬í™”ë¥¼ í†µí•´ queryFnìœ¼ë¡œ ë³€í˜•ëœ ë°ì´í„°ê°€ ì´ì „ì˜ ë°ì´í„°ì™€ ë³€ê²½ì‚¬í•­ì´ ìˆëŠ”ì§€ íŒŒì•…í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë³‘ëª©í˜„ìƒì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.\n\në”°ë¼ì„œ ì´ëŸ¬í•œ ìµœì í™”ê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤ë©´ ( ë°›ì•„ì˜¨ ë°ì´í„°ê°€ ì‹¤ì œë¡œ ë³€ê²½ëœ ë¶€ë¶„ë§Œ êµì²´í•˜ë„ë¡ í•˜ì—¬ ë³€ê²½ë˜ì§€ ì•Šì€ ë°ì´í„°ë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ” componentë“¤ì˜ re-renderingì„ ë°©ì§€í•˜ëŠ” ìµœì í™” ) structureSharing: falseë¥¼ í†µí•´ ëŒ ìˆ˜ ìˆë‹¤.\n\n# #4. React-query ìƒíƒœ í™•ì¸\n\në¦¬ì•¡íŠ¸ ì¿¼ë¦¬ëŠ” ì¿¼ë¦¬ì˜ ìƒíƒœ í•„ë“œì— ì‰½ê²Œ access í•  ìˆ˜ ìˆë„ë¡ í•´ì¤€ë‹¤. ë”°ë¼ì„œ í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ queryê°€ ì–´ë–¤ ìƒíƒœì¸ì§€( ë¡œë”©, ì—ëŸ¬, íŒ¨ì¹­ ë“± ) ì‰½ê²Œ íŒŒì•…ì´ ëœë‹¤. react-queryì—ì„œ ë…¸ì¶œí•´ì£¼ëŠ” í”Œë˜ê·¸ê°’ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- success: ì¿¼ë¦¬ê°€ ì„±ê³µí–ˆìœ¼ë©°, ë°ì´í„°ê°€ ìˆìŒ.\n- error: ì¿¼ë¦¬ê°€ ì‹¤íŒ¨ í–ˆìœ¼ë©°, ì˜¤ë¥˜ê°€ ì„¤ì •ë˜ì—ˆìŒ.\n- loading: ì¿¼ë¦¬ë¥¼ ì²˜ìŒìœ¼ë¡œ ë¡œë“œì¤‘ì´ë©°, í˜„ì¬ ë°ì´í„°ê°€ ì—†ìŒ.\n- idle: ì¿¼ë¦¬ ë¹„í™œì„± ìƒíƒœ ( ë¡œë“œ ëœ ì  ì—†ìŒ )\n\n```jsx\nconst todos = useTodos();\n\nif (todos.isLoading) {\n  return 'Loading...';\n}\nif (todos.error) {\n  return 'An error has occurred: ' + todos.error.message;\n}\n\nreturn <div>{todos.data.map(renderTodo)}</div>;\n```\n\në¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì—ì„  re-fetching ë©”ì»¤ë‹ˆì¦˜ì´ ì—†ì§€ë§Œ, ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì—ì„  refetchOnMount, refetchOnWindowFocus, refetchOnReconnetì˜ ê°œë…ì„ ì œê³µí•˜ì—¬ ë°ì´í„° refetchë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡í•´ì¤ë‹ˆë‹¤. ( ê·¸ëŸ¬ë‚˜ ë°±ê·¸ë¼ìš´ë“œ refetchì˜ ì‹¤íŒ¨ì‹œ í˜¼ë€ìŠ¤ëŸ¬ìš´ uxê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìˆë‹¤. )\n\n> ë°±ê·¸ë¼ìš´ë“œ ì˜¤ë¥˜\n\n```jsx\n{\n  \"status\": \"error\",\n  \"error\": { \"message\": \"Something went wrong\" },\n  \"data\": [{ ... }]\n}\n```\n\nfetchê°€ ì‹¤íŒ¨í•œ ì¿¼ë¦¬ì˜ ë°ì´í„° ìƒíƒœëŠ” ë‹¤ìŒê³¼ ê°™ì„ ìˆ˜ ìˆë‹¤. ìœ„ì™€ê°™ì´ fetchê°€ ì‹¤íŒ¨í•˜ì˜€ìŒì—ë„, ì´ì „ì— ê°€ì§€ê³  ìˆë˜ dataëŠ” ì‚­ì œë˜ì§€ ì•Šê³  ê°€ì§€ê³  ìˆì„ ìˆ˜ ìˆìœ¼ë©°, stale-while-revalidate ìºì‹± ë©”ì»¤ë‹ˆì¦˜ì„ ìˆ˜ìš©í•œ ê²°ê³¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤. (re-fetchì‘ì—…ì€ defaultë¡œ 3ë²ˆê¹Œì§€ ì‹¤í–‰ëœë‹¤.)\n\n# #5. React-query í…ŒìŠ¤íŠ¸í•˜ê¸°\n\n# #6. React-Query & TypeScript\n\n```jsx\nexport function useQuery<\n  TQueryFnData = unknown,\n  TError = unknown,\n  TData = TQueryFnData,\n  TQueryKey extends QueryKey = QueryKey\n>\n```\n\n> ë„¤ê°€ì§€ generic\n\n- TQueryFnData: queryFnì—ì„œ ë°˜í™˜ëœ ìœ í˜•.\n- TError: queryFnì—ì„œ ì˜ˆìƒë˜ëŠ” ì˜¤ë¥˜ ìœ í˜•\n- TData: ë°ì´í„° ì†ì„±. (queryFnì—ì„œ ë°˜í™˜í•˜ëŠ” ë°ì´í„° ìœ í˜•ê³¼ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ)\n- TQueryKey: queryFnì— ì „ë‹¬ëœ queryKeyë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ë§Œ ì‚¬ìš©í•˜ëŠ” ìœ í˜•\n\n> íƒ€ì… ì¶”ë¡ \n\n```jsx\nfunction identity<T>(value: T): T {\n  return value;\n}\n\n// ğŸš¨ no need to provide the generic\nlet result = identity < number > 23;\n\n// âš ï¸ or to annotate the result\nlet result: number = identity(23);\n\n// ğŸ˜ infers correctly to `string`\nlet result = identity('react-query');\n```\n\n>\n\n> ë¶€ë¶„ íƒ€ì… ì¸ìˆ˜ ì¶”ë¡ \n\n```jsx\nfunction useGroupCount() {\n  return useQuery<Group[], Error>('groups', fetchGroups, {\n    select: (groups) => groups.length,\n    // ğŸš¨ Type '(groups: Group[]) => number' is not assignable to type '(data: Group[]) => Group[]'.\n    // Type 'number' is not assignable to type 'Group[]'.ts(2322)\n  })\n}\n```\n\n```jsx\nfunction useGroupCount() {\n  // âœ… fixed it\n  return useQuery<Group[], Error, number>('groups', fetchGroups, {\n    select: (groups) => groups.length,\n  })\n}\n```\n\nìœ„ì˜ ê²½ìš° useQueryì—ì„œ selectì— ëŒ€í•œ typeì„ ì§€ì •í•´ì£¼ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— íƒ€ì…ì„ ì¶”ë¡ í•  ìˆ˜ ì—†ë‹¤.\n\nì•„ë˜ì˜ ê²½ìš° numberë¡œ selectë¶€ì˜ íƒ€ì…ì„ ì„ ì–¸í•´ì£¼ì—ˆê¸° ë•Œë¬¸ì— í•´ë‹¹ íƒ€ì…ìœ¼ë¡œ ì´ìš©ì´ ëœë‹¤.\n\n> ëª¨ë“ ê²ƒì„ ì¶”ë¡ \n\n```jsx\nfunction useGroups() {\n  // ğŸš¨ data will be `any` here\n  return useQuery('groups', () =>\n    axios.get('groups').then((response) => response.data)\n  );\n}\n```\n\në§Œì•½ ìœ„ì™€ê°™ì´ axiosì˜ ë°˜í™˜ê°’ì„ ê·¸ëŒ€ë¡œ useQueryì—ì„œ ì´ìš©í•˜ê²Œ ëœë‹¤ë©´, íƒ€ì…ì„ ì¶”ë¡ í•  ìˆ˜ ì—†ê³  fetch libraryì—ì„œ ì œê³µí•˜ëŠ” íƒ€ì…ì„ ê·¸ëŒ€ë¡œ ì¸ìš©í•˜ê²Œ ëœë‹¤. ë”°ë¼ì„œ íƒ€ì…ì„ ìœ ì¶”í•  ìˆ˜ ìˆë„ë¡ ì¤‘ê°„ layer functionì„ ì‘ì„±í•˜ì—¬ ì´ìš©í•˜ëŠ” ë°©ë²•ì„ ì“°ëŠ”ê²Œ ì¢‹ë‹¤.\n\n```jsx\nfunction fetchGroups(): Promise<Group[]> {\n  return axios.get('groups').then((response) => response.data);\n}\n\n// âœ… data will be `Group[] | undefined` here\nfunction useGroups() {\n  return useQuery('groups', fetchGroups);\n}\n\n// âœ… data will be `number | undefined` here\nfunction useGroupCount() {\n  return useQuery('groups', fetchGroups, {\n    select: (groups) => groups.length,\n  });\n}\n```\n\n> íƒ€ì… ì¶•ì†Œ\n\n```jsx\nconst { data, isSuccess } = useGroups();\nif (isSuccess) {\n  // ğŸš¨ data will still be `Group[] | undefined` here\n}\n\nconst groupsQuery = useGroups();\nif (groupsQuery.isSuccess) {\n  // âœ… groupsQuery.data will now be `Group[]`\n}\n```\n\nìœ„ì˜ ë°©ì‹ì²˜ëŸ¼ destructuringì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ typeì¶”ë¡ ì—ì„œ undefinedê°€ ì¶”ê°€ë  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ êµ¬ì¡°ë¶„í•´í• ë‹¹ë³´ë‹¨ ê°ì²´ë¥¼ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™€ì„œ chaningì„ ì´ìš©í•˜ì—¬ ì´ìš©í•˜ëŠ”ê²ƒì´ íƒ€ì…ì˜ ë²”ìœ„ë¥¼ ì¶•ì†Œí•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ë°©ë²•ì´ë‹¤.\n\n# #8. íš¨ê³¼ì ì¸ React-Query key\n\në¦¬ì•¡íŠ¸ì¿¼ë¦¬ì—ì„œ í‚¤ëŠ” ì¤‘ìš” í•µì‹¬ê°œë…ìœ¼ë¡œ, ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‚´ë¶€ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ìºì‹œí•˜ê³ , re-fetchë¥¼ í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê°œë…ì´ë‹¤.\n\n> ë°ì´í„° ìºì‹±\n\nì¿¼ë¦¬ ìºì‹œëŠ” ì§ë ¬í™”ëœ ì¿¼ë¦¬í‚¤ë¥¼ í‚¤ë¡œ í•˜ê³ , ë°ì´í„°ì™€ ë§¤í„°ì •ë³´ë¥¼ ê°–ëŠ” javascript objectë¥¼ valueë¡œ ê°–ë„ë¡ í•œë‹¤.\n\nì´ë•Œ, query keyëŠ” ê³ ìœ í•´ì•¼ í•˜ê³ , useQuery â†”Â useInfiniteQueryì— ë™ì¼í•œ ì¿¼ë¦¬í‚¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.\n\n```jsx\nuseQuery(['todos'], fetchTodos);\n\n// ğŸš¨ this won't work\nuseInfiniteQuery(['todos'], fetchInfiniteTodos);\n\n// âœ… choose something else instead\nuseInfiniteQuery(['infiniteTodos'], fetchInfiniteTodos);\n```\n\n> ìë™ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê¸°\n\n```jsx\nfunction Component() {\n  const { data, refetch } = useQuery(['todos'], fetchTodos)\n\n  // â“ how do I pass parameters to refetch â“\n  return <Filters onApply={() => refetch(???)} />\n}\n```\n\nìœ„ì˜ ì½”ë“œë¥¼ ë³´ë©´ finterì—ì„œ í•„í„°ê°€ selectë˜ì–´ applyë˜ëŠ” ì‹œì ì— todosë¥¼ í•´ë‹¹ í•„í„°ì— ë§ëŠ” ê²ƒë“¤ë§Œ í•„í„°ë§í•˜ì—¬ ê°€ì ¸ì˜¤ê¸¸ ì›í•œë‹¤.\n\nê·¸ëŸ¬ë‚˜ applyì— refetchë¥¼ í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì€ ì ì ˆí•˜ì§€ ì•Šë‹¤. todosì— í•´ë‹¹í•˜ëŠ” cacheê°’ì€ ì´ì „ê³¼ ì–¸ì œë‚˜ ë™ì¼í•˜ê²Œ ìˆì„í…Œë‹ˆê¹. (query keyê°’ì€ ê·¸ëŒ€ë¡œì´ë¯€ë¡œ)\n\në”°ë¼ì„œ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½í•´ì•¼ í•œë‹¤.\n\n```jsx\nfunction Component() {\n  const [filters, setFilters] = React.useState();\n  const { data } = useQuery(['todos', filters], () => fetchTodos(filters));\n\n  // âœ… set local state and let it \"drive\" the query\n  return <Filters onApply={setFilters} />;\n}\n```\n\n> ìˆ˜ë™ ìƒí˜¸ ì‘ìš©\n\nì¿¼ë¦¬ìºì‹œì— ëŒ€í•œ ìˆ˜ë™ì ì¸ ìƒí˜¸ì‘ìš©ì„ ì´ìš©í•˜ê¸° ìœ„í•´ì„  invalidateQueries, setQueriesDataë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤. ì´ë•Œ, query filterë¥¼ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— filter ê°ì²´ì— ëª…ì‹œí•œ ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” ì¿¼ë¦¬ë“¤ì— ê´€í•˜ì—¬ ìƒí˜¸ì‘ìš©í•˜ë„ë¡ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ìˆë‹¤.\n\n> íš¨ê³¼ì ì¸ ì¿¼ë¦¬ í‚¤\n\n- ë„ë©”ì¸ ë³„ë¡œ queries.tsë¡œ íŒŒì¼ ê´€ë¦¬í•˜ë„ë¡ í•œë‹¤.\n- ì¿¼ë¦¬í‚¤ëŠ” í•­ìƒ ë°°ì—´ë¡œ ë§Œë“ ë‹¤\n- ì¿¼ë¦¬í‚¤ ë°°ì—´ì€ ì¼ë°˜ì ì¸ê²ƒ â†’ êµ¬ì²´ì ì¸ê²ƒ ìˆœì„œë¡œ êµ¬ì²´í™”í•˜ì—¬ êµ¬ì¡°í™” í•œë‹¤.\n- ## ì¿¼ë¦¬ í‚¤ íŒ©í† ë¦¬ ì‚¬ìš©\n  ```jsx\n  const todoKeys = {\n    all: ['todos'] as const,\n    lists: () => [...todoKeys.all, 'list'] as const,\n    list: (filters: string) => [...todoKeys.lists(), { filters }] as const,\n    details: () => [...todoKeys.all, 'detail'] as const,\n    detail: (id: number) => [...todoKeys.details(), id] as const,\n  }\n  ```\n\n> QueryFunctionContext\n\nìœ„ì˜ todoKeysë¥¼ ë³´ë©´ ì¿¼ë¦¬í‚¤ë¥¼ ë°°ì—´ë¡œ ì‘ì„±í–ˆë‹¤. ì´ë•Œ QueryFunctionContextë¥¼ ì´ìš©í•˜ë©´ ì…ë ¥ëœ queryKeyë¥¼ êµ¬ì¡°ë¶„í•´ í• ë‹¹ì‹œ\n\n```jsx\nconst todoKeys = {\n  all: ['todos'] as const,\n  lists: () => [...todoKeys.all, 'list'] as const,\n  list: (state: State, sorting: Sorting) =>\n    [...todoKeys.lists(), state, sorting] as const,\n}\n\nconst fetchTodos = async ({\n  queryKey,\n}: // ğŸ¤¯ only accept keys that come from the factory\nQueryFunctionContext<ReturnType<typeof todoKeys['list']>>) => {\n  const [, , state, sorting] = queryKey\n  const response = await axios.get(`todos/${state}?sorting=${sorting}`)\n  return response.data\n}\n\nexport const useTodos = () => {\n  const { state, sorting } = useTodoParams()\n\n  // âœ… build the key via the factory\n  return useQuery(todoKeys.list(state, sorting), fetchTodos)\n}\n```\n\nì½¤ë§ˆë¥¼ ì´ìš©í•˜ì—¬ ë¶ˆë¶„ëª…í•˜ê²Œ êµ¬ë¶„í•´ì•¼ë§Œ í•œë‹¤.\n\në”°ë¼ì„œ ì´ëŸ¬í•œ ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ì¿¼ë¦¬í‚¤ë¥¼ ê°ì²´ í˜•íƒœë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ë„ë¡ í•˜ëŠ” ë°©ë²•ì´ ì¢‹ë‹¤.\n\n```jsx\nconst todoKeys = {\n  // âœ… all keys are arrays with exactly one object\n  all: [{ scope: 'todos' }] as const,\n  lists: () => [{ ...todoKeys.all[0], entity: 'list' }] as const,\n  list: (state: State, sorting: Sorting) =>\n    [{ ...todoKeys.lists()[0], state, sorting }] as const,\n}\n\nconst fetchTodos = async ({\n  // âœ… extract named properties from the queryKey\n  queryKey: [{ state, sorting }],\n}: QueryFunctionContext<ReturnType<typeof todoKeys['list']>>) => {\n  const response = await axios.get(`todos/${state}?sorting=${sorting}`)\n  return response.data\n}\n\nexport const useTodos = () => {\n  const { state, sorting } = useTodoParams()\n\n  return useQuery(todoKeys.list(state, sorting), fetchTodos)\n}\n```\n\n# #9. ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì˜ placeholder ë° init data\n\në¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì—ì„œ ë™ê¸°ì‹ìœ¼ë¡œ ë¯¸ë¦¬ ê°’ì„ ì±„ìš°ëŠ” ë°©ì‹ìœ¼ë¡œ ë‘ê°€ì§€ë¥¼ ì œê³µí•œë‹¤.\n\n- placeholder\n- initial data\n\n> ìœ ì‚¬ì \n\n```jsx\nfunction Component() {\n  // âœ… status will be success even if we have not yet fetched data\n  const { data, status } = useQuery(['number'], fetchNumber, {\n    placeholderData: 23,\n  });\n\n  // âœ… same goes for initialData\n  const { data, status } = useQuery(['number'], fetchNumber, {\n    initialData: () => 42,\n  });\n}\n```\n\në‘ê°€ì§€ ëª¨ë‘ ìºì‹œì— í•´ë‹¹ ì¿¼ë¦¬í‚¤ë¡œ ê°’ì´ ì €ì¥ë˜ì–´ìˆë‹¤ë©´, ì•„ë¬´ëŸ° ì—­í• ì„ í•˜ì§€ ëª»í•œë‹¤.\n\n> ì°¨ì´ì \n\n- initialData: cacheìˆ˜ì¤€ì—ì„œ ì‘ë™\n  - cacheì— ê°’ì´ ì €ì¥ëœë‹¤.\n  - cacheí•­ëª©ì˜ ìƒì„± ìˆœê°„( ì²«ë²ˆì§¸ observerê°€ mountë˜ëŠ” ì‹œì  )ì— ê°’ì´ ì €ì¥ëœë‹¤.\n- placeholder: observerìˆ˜ì¤€ì—ì„œ ì‘ë™\n  - cacheì— ì €ì¥ë˜ì§€ ì•ŠëŠ”ë‹¤.\n  - ë”°ë¼ì„œ componentë§ˆë‹¤ placeholderì— ëŒ€í•œ ê°’ì´ ë‹¤ë¥¼ ìˆ˜ ìˆë‹¤\n\n> ì—ëŸ¬ ì²˜ë¦¬\n\nbackground re-fetchê°€ ì‹¤íŒ¨í–ˆì„ ì‹œ\n\n- initialData\n  - ìºì‹œì—” ì´ë¯¸ initialDataê°€ ì¡´ë°°í•˜ë¯€ë¡œ ë‹¤ë¥¸ background ì˜¤ë¥˜ì™€ ê°™ì´ ì²˜ë¦¬í•˜ë©´ ëœë‹¤.\n- placeholder\n  - cacheì— ë°ì´í„°ê°€ ì ì¬ë˜ë ¤ê³  í•˜ëŠ” ìˆœê°„ ì˜¤ë¥˜ì´ë¯€ë¡œ placeholderëŠ” ì‚¬ë¼ì§€ê³  cacheì—” undefinedê°€ ì €ì¥ëœë‹¤.\n\n# 10. ìƒíƒœê´€ë¦¬ìë¡œì„œ react query\n\n> ë¹„ë™ê¸° ìƒíƒœ ê´€ë¦¬ì\n\nQueryClientProvider í•˜ìœ„ì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  componentì—ì„  queryClientë¥¼ í†µí•´ í‘œì¶œí•˜ëŠ” ëª¨ë“  ë°ì´í„°ëŠ” observerë¡œì„œ ê´€ì°°ì´ ê°€ëŠ¥í•˜ê²Œ ë˜ë©° í•´ë‹¹ ê°’ì˜ ë³€ê²½ì„ ìë™ìœ¼ë¡œ ê°ì§€í•˜ì—¬ renderingí•˜ê²Œ ë˜ë¯€ë¡œ, ë¹„ë™ê¸° ìƒíƒœë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ì—¬ í‘œì¶œ ê°€ëŠ¥í•˜ë‹¤.\n\n> ë°ì´í„° ë™ê¸°í™” ë„êµ¬\n\në¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì˜ cacheë°ì´í„°ë¥¼ êµ¬ë…í•˜ëŠ” componentë“¤ì€ cacheì— ì €ì¥ëœ snapshotì„±ê²©ì˜ ë°ì´í„°ë¥¼ í‘œì‹œë§Œ í•˜ëŠ”ê²ƒì´ë‹¤. ë”°ë¼ì„œ í•´ë‹¹ ë°ì´í„°ê°€ stale í•œì§€ freshí•œì§€ íŒë³„í•˜ì—¬ cacheì— ì €ì¥ëœ snapshot ë°ì´í„°ê°€ back-endì™€ ë™ê¸°í™”ë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.\n\n- ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ì´ì „ì˜ ë°ì´í„° ë™ê¸°í™”\n  - ê°€ì ¸ì˜¨ í›„ globalë¡œ ì €ì¥í•˜ê³ , ì—…ë°ì´íŠ¸ í•˜ì§€ ì•ŠëŠ”ë‹¤.\n- mountì‹œë§ˆë‹¤ ê°€ì ¸ì˜¤ê³  component localì— í•œì •\n  - useEffect(()â‡’{}, []) ì„ í†µí•´ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ component localì—ì„œ ì´ìš©í•œë‹¤.\n\n> ë°ì´í„° ì¬ê²€ì¦( ì„œë²„ì™€ ë™ê¸°í™” ) í•˜ëŠ”ë™ì•ˆ stale data í‘œì¶œ\n\në°ì´í„°ë¥¼ ì„œë²„ë¡œë¶€í„° ìƒˆë¡œ ê°€ì ¸ì˜¤ëŠ” ê³¼ì •ì€ ì‹œê°„ì´ ê±¸ë¦¬ê³ , í™”ë©´ì—ì„  í•­ìƒ loading bar || spinnerê°€ í‘œì¶œë˜ì–´ì•¼ë§Œ í•œë‹¤. ì´ê²ƒì€ ì‚¬ìš©ì ê´€ì ì—ì„œ â€œëŠë¦¬ë‹¤\"ëŠ” ëŠë‚Œì„ ë°›ê²Œ í•˜ë¯€ë¡œ, fresh ë°ì´í„°ê°€ í‘œì¶œë˜ê¸° ì „ì— staleë°ì´í„°ê°€ ë¨¼ì € í‘œì¶œë˜ëŠ”ê²ƒì´ ë‚˜ì„ ìˆ˜ ìˆë‹¤.\n\n> smart re-fetch\n\n- refetchOnMount\n  - mountì‹œë§ˆë‹¤ ì¬ê²€ì¦í•œë‹¤.\n- refetchOnWindowFocus\n  - ë¸Œë¼ìš°ì €íƒ­ì— í¬ì»¤ìŠ¤ë¥¼ í•  ë•Œë§ˆë‹¤ re-fetchí•œë‹¤. ì´ê²Œ ë„ˆë¬´ ë§ë‹¤ê³  ëŠë‚„ ìˆ˜ ìˆìœ¼ë‚˜, ì‚¬ìš©ì ê´€ì ì—ì„œ ë‹¤ë¥¸íƒ­ì— í¬ì»¤ì‹±ì„ í–ˆë‹¤ í•´ë‹¹ íƒ­ìœ¼ë¡œ ëŒì•„ì™”ì„ë•Œ freshë°ì´í„°ë¥¼ í‘œì¶œí•´ì£¼ëŠ”ê²ƒì€ ì‚¬ìš©ìì—ê²Œ ìµœì‹ ì˜ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” ì™„ë²½í•œ ë°©ë²•ì´ë‹¤.\n- refetchOnReconnect\n  - ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì¢…ë£Œ í›„ freshê°’ì„ í‘œì¶œí•´ì£¼ëŠ”ê²ƒ ë˜í•œ í™”ë©´ì˜ ê°’ì´ ì •í™•í•œì§€ ì—¬ë¶€ë¥¼ ë‹¤ì‹œ í™•ì¸í•  ë•Œ ì¢‹ì€ ì§€í‘œê°€ ë  ìˆ˜ ìˆë‹¤.\n\në§Œì•½ cacheë°ì´í„°ë¥¼ ë°”ë¼ë³´ëŠ” componentë¥¼ ë‹¤ë¥¸ componentì˜ í•˜ìœ„ componentë¡œ ë„£ì„ ê²½ìš° refetchOnMountë¥¼ ì¼œë†“ê²Œ ë˜ë©´ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ë§ˆë‹¤ í•˜ìœ„ ì»´í¬ë„ŒíŠ¸ì˜ ë°ì´í„°ë¥¼ ê³„ì†í•´ì„œ re-fetchí•˜ê¸° ë•Œë¬¸ì— refetchOnMountë¥¼ ë„ëŠ”ê²Œ ì¢‹ì„ ìˆ˜ ìˆë‹¤.\n\n> staleTime ì‚¬ìš©ì ì§€ì •\n\nìµœì‹ ê°’ì„ í‘œì¶œí•˜ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ì¤‘ë³µìš”ì²­ì„ ì œê±°í•˜ê¸° ìœ„í•´ ìµœì†Œ 20ì´ˆ ì •ë„ë¡œ ì„¤ì •í•˜ëŠ”ê²Œ ì¢‹ì€ ì„ íƒì¼ ìˆ˜ ìˆë‹¤.\n\nì´ëŸ¬í•œ ì„¤ì •ë“¤ì„ ì¡ê¸°ìœ„í•´ setQueryDefaultsë¥¼ ì´ìš©í•´ queryKeyë“¤ì˜ ê¸°ë³¸ì„¤ì •ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.\n","fileName":"2024-01-28","route":"2024-01-28"},{"meta":{"title":"ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸","desc":"ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì†ŒìŠ¤ì½”ë“œ í‰ê°€ ë° ì‹¤í–‰ì— ëŒ€í•œ ì„¤ëª…","date":"2024.01.27","tags":["ìë°”ìŠ¤í¬ë¦½íŠ¸","javascript","context","ìë°”ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸"]},"content":"# ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸\n\n> ìë°”ìŠ¤í¬ë¦½íŠ¸ ì†ŒìŠ¤ì½”ë“œì˜ 4ê°€ì§€ íƒ€ì…\n> \n1. ì†ŒìŠ¤ ì½”ë“œ : ì „ì—­ì— ì¡´ì¬í•˜ëŠ” ì†ŒìŠ¤ì½”ë“œ( í•¨ìˆ˜, í´ë˜ìŠ¤ë™ì˜ ë‚´ë¶€ ì½”ë“œëŠ” í¬í•¨ë˜ì§€ ì•ŠìŒ )\n2. í•¨ìˆ˜ ì½”ë“œ : í•¨ìˆ˜ ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” ì†ŒìŠ¤ì½”ë“œ ( ì¤‘ì²© í•¨ìˆ˜, í´ë˜ìŠ¤ ë“±ì˜ ì½”ë“œëŠ” í¬í•¨ë˜ì§€ ì•ŠìŒ )\n3. eval ì½”ë“œ : evalì— ì „ë‹¬ë˜ì–´ ì‹¤í–‰ë˜ëŠ” ì†ŒìŠ¤ì½”ë“œ\n4. ëª¨ë“ˆ ì½”ë“œ : ëª¨ë“ˆ ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” ì†ŒìŠ¤ì½”ë“œ ( ëª¨ë“ˆ ë‚´ë¶€ì˜ í•¨ìˆ˜, í´ë˜ìŠ¤ ë“±ì˜ ë‚´ë¶€ ì½”ë“œëŠ” í¬í•¨ë˜ì§€ ì•ŠìŒ )\n\n> ì†ŒìŠ¤ ì½”ë“œ\n> \n\nì „ì—­ ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì „ì—­ ìŠ¤ì½”í”„ë¥¼ ìƒì„±í•˜ê³ , ì „ì—­ë³€ìˆ˜/í•¨ìˆ˜ ì„ ì–¸ë¬¸ ë“±ì„ ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œë¡œ ë°”ì¸ë”© ì‹œí‚¨ë‹¤.\n\n> í•¨ìˆ˜ ì½”ë“œ\n> \n\nì§€ì—­ ã……ì½”í”„ë¥¼ ìƒì„±í•˜ê³ , ì§€ì—­ë³€ìˆ˜, ë§¤ê°œë³€ìˆ˜, argumentsê°ì²´ë¥¼ ê´€ë¦¬í•œë‹¤.\n\n> eval ì½”ë“œ\n> \n\nstrict modeì—ì„œ ìì‹ ë§Œì˜ ìŠ¤ì½”í”„ë¥¼ ìƒì„±í•˜ê³  ì´ë¥¼í†µí•´ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ëœë‹¤.\n\n> ëª¨ë“ˆ ì½”ë“œ\n> \n\nëª¨ë“ˆë³„ ë…ë¦½ì  ëª¨ë“ˆ ìŠ¤ì½”í”„ë¥¼ ìƒì„±í•œë‹¤.\n\nëª¨ë“ˆ ì½”ë“œê°€ í‰ê°€ë˜ë©´ ëª¨ë“ˆì˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ëœë‹¤.\n\n# ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì†ŒìŠ¤ì½”ë“œ í‰ê°€ ë° ì‹¤í–‰\n\nìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ì‹¤í–‰ì€ í¬ê²Œ ë‘ ê°€ì§€ ê³¼ì •ì´ ìˆë‹¤.\n\n1. ì†ŒìŠ¤ì½”ë“œ í‰ê°€\n    1. ì†ŒìŠ¤ì½”ë“œ í‰ê°€ ê³¼ì •ì´ ì‹¤í–‰ë˜ë©´ ë¨¼ì € ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•œë‹¤.\n    2. ë³€ìˆ˜ ë° í•¨ìˆ˜ì˜ ì„ ì–¸ë¬¸ë§Œ ë¨¼ì € ì‹¤í–‰í•˜ì—¬ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ê´€ë¦¬í•˜ëŠ” ìŠ¤ì½”í”„( ë ‰ì‹œì»¬ í™˜ê²½ ìŠ¤ì½”í”„ )ì— ë“±ë¡í•œë‹¤.\n2. ì†ŒìŠ¤ì½”ë“œì˜ ì‹¤í–‰\n    1. ì†ŒìŠ¤ì½”ë“œ í‰ê°€ê°€ ì™„ë£Œë˜ë©´ ì„ ì–¸ë¬¸ì„ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ì†ŒìŠ¤ì½”ë“œê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤. ( = runtime)\n    2. ì´ë•Œ í•„ìš”í•œ ì‹¤í–‰ì •ë³´(ë³€ìˆ˜ ë° í•¨ìˆ˜ ê°’)ì€ í•´ë‹¹  ìŠ¤ì½”í”„ì—ì„œ ì·¨ë“í•œë‹¤.\n    3. ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ì˜ ë³€ê²½ì´ ì¼ì–´ë‚˜ë©´ í•´ë‹¹ ìŠ¤ì½”í”„ì˜ ë³€ìˆ˜/í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•œë‹¤.\n\n# ìë°”ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ì—­í• \n\n1. ì „ì—­ ì½”ë“œ í‰ê°€\n    1. ì „ì—­ë³€ìˆ˜, í•¨ìˆ˜ì„ ì–¸ë¬¸ì„ ì „ì—­ ê°ì²´ì˜ í”„ë¡œí¼í‹° ë° ë©”ì„œë“œë¡œ ë“±ë¡\n2. ì „ì—­ ì½”ë“œ ì‹¤í–‰\n    1. í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ë©´ ì „ì—­ ì½”ë“œ ì‹¤í–‰ì„ ì¼ì‹œ ì¤‘ë‹¨í•˜ê³ , í•¨ìˆ˜ ë‚´ë¶€ë¡œ ì§„ì…\n3. í•¨ìˆ˜ ì½”ë“œ í‰ê°€\n    1. í•¨ìˆ˜ì˜ ì½”ë“œë¥¼ í‰ê°€í•˜ë©° í•„ìš”í•œ ê°’ë“¤ì„ í•¨ìˆ˜ ë‚´ë¶€ ìŠ¤ì½”í”„ì— ë“±ë¡\n4. í•¨ìˆ˜ ì½”ë“œ ì‹¤í–‰\n    1. í•¨ìˆ˜ ì½”ë“œ í‰ê°€ë¡œ ë“±ë¡ëœ ë³€ìˆ˜/í•¨ìˆ˜ë“¤ì„ ì´ìš©í•˜ì—¬ ì½”ë“œë¥¼ ì‹¤í–‰í•œë‹¤.","fileName":"2024-01-27","route":"2024-01-27"}]},"__N_SSG":true}