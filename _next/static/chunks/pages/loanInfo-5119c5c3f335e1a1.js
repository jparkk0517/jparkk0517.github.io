(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{8538:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/loanInfo",function(){return n(225)}])},225:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var r=n(5893),l=e=>{let{columns:t,contents:n,renderKey:l,onRowClick:a}=e;return(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"table border-white",children:[(0,r.jsx)("thead",{children:(0,r.jsx)("tr",{children:t.map(e=>(0,r.jsx)("th",{children:e.title},e.key))})}),(0,r.jsx)("tbody",{children:n.map(e=>(0,r.jsx)("tr",{className:"cursor-pointer hover:bg-stone-700 hover:text-white",onClick:()=>{a&&a(e)},children:t.map(t=>{let n=e[t.key];return(0,r.jsx)("td",{children:t.render?t.render(n,e):n},t.key)})},l(e)))})]})})},a=n(7294);function s(e){let{text:t="",checked:n=!0,onChange:l=()=>{}}=e,[s,o]=(0,a.useState)(n);return(0,a.useEffect)(()=>{o(n)},[n]),(0,r.jsx)("div",{className:"form-control",children:(0,r.jsxs)("label",{className:"label cursor-pointer",children:[(0,r.jsx)("span",{className:"label-text",children:t}),(0,r.jsx)("input",{type:"checkbox",className:"toggle",checked:s,onChange:e=>{l(e.target.checked)}})]})})}var o=n(4529);let i={income:75e5,outcome:3e6,loanRate:.04,avgAnnualReturn:.036,firstMoney:22e7},c=(0,o.Ue)(e=>({fixedInfo:i,loanList:[{id:"0",title:"월세",monthlyCharge:14e5,loanAmount:0,loanInterestRate:.04,avgAnnualReturn:.036,firstMoney:17e7,repaymentOfPrincipal:!1},{id:"1",title:"전세",monthlyCharge:0,loanAmount:15e7,loanInterestRate:.04,avgAnnualReturn:.036,firstMoney:0,repaymentOfPrincipal:!1},{id:"2",title:"매매",monthlyCharge:0,loanAmount:45e7,loanInterestRate:.04,avgAnnualReturn:.036,firstMoney:0,repaymentOfPrincipal:!0}],setFixedInfo(t){e(e=>({...e,fixedInfo:t}))},addLoanInfo(t){e(e=>({...e,loanList:[...e.loanList,t]}))},deleteLoanInfo(t){e(e=>({...e,loanList:e.loanList.filter(e=>e.id!==t)}))},changeLoanInfo(t,n,r){console.log(t,n,r),e(e=>({...e,loanList:e.loanList.map(e=>e.id===t?{...e,[n]:r}:e)}))},reset(){e(e=>({...e,fixedInfo:i}))}}));var u=n(7486),d=n(3860),m=n.n(d),x=e=>{let{className:t,children:n,...l}=e;return(0,r.jsx)("button",{...l,className:"btn btn-outline ".concat(null!=t?t:""),children:n})};function h(e){let{startDate:t=m()(),onChange:n=()=>{}}=e,[l,s]=(0,a.useState)(!1),[o,i]=(0,a.useState)(t),[c,u]=(0,a.useState)(t),d=(0,a.useRef)(null),h=(0,a.useRef)(null),f=(e,t,n)=>{let r=m()(new Date(e,t,n));i(r),u(r)},p=e=>{i(o.add(e,"month"))};(0,a.useEffect)(()=>{i(t)},[t]),(0,a.useEffect)(()=>{l||i(c)},[l,c]);let g=o.startOf("month").day(),j=Array.from({length:o.daysInMonth()},(e,t)=>t+1),y=o.year(),b=o.month();return(0,a.useEffect)(()=>{let e=e=>{d.current&&!d.current.contains(e.target)&&h.current&&!h.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:h,type:"text",value:c.format("YYYY-MM-DD"),readOnly:!0,onClick:()=>s(!l),className:"input cursor-pointer outline-transparent"}),l&&(0,r.jsx)("div",{className:"fixed z-50 size-full",children:(0,r.jsx)("div",{className:"container mt-5 max-w-[400px]",ref:d,children:(0,r.jsxs)("div",{className:"rounded-lg bg-white p-4 shadow",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:()=>p(-1),children:"←"}),(0,r.jsx)("span",{children:o.format("YYYY MM")}),(0,r.jsx)("button",{onClick:()=>p(1),children:"→"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-4",children:[["일","월","화","수","목","금","토"].map(e=>(0,r.jsx)("div",{className:"text-center font-bold",children:e},e)),Array.from({length:g}).map((e,t)=>(0,r.jsx)("div",{className:""},"empty-".concat(t))),j.map(e=>(0,r.jsx)("div",{className:"cursor-pointer py-2 text-center ".concat(c.date()===e&&c.month()===b?"bg-blue-500 text-white":"bg-transparent"),onClick:()=>f(y,b,e),children:e},e))]}),(0,r.jsx)("div",{className:" text-right",children:(0,r.jsx)(x,{disabled:c.isSame(t),onClick:()=>{n(c)},children:"적용"})})]})})})]})}var f=e=>{let{isOpen:t,title:n,children:l,onClose:s,onConfirm:o,outsideClickClose:i=!0}=e,c=(0,a.useRef)(null);return(0,a.useEffect)(()=>{var e,n;return t?(null===(e=c.current)||void 0===e||e.showModal(),document.body.style.overflow="hidden"):(null===(n=c.current)||void 0===n||n.close(),document.body.style.overflow=""),()=>{document.body.style.overflow=""}},[t]),(0,r.jsxs)("dialog",{id:"my_modal_1",className:"modal",ref:c,children:[i&&(0,r.jsx)("div",{className:"dimmed absolute left-0 top-0 h-screen w-screen",onClick:s}),(0,r.jsxs)("div",{className:"modal-box",children:[(0,r.jsx)("h3",{className:"text-lg font-bold",children:n}),(0,r.jsx)("p",{className:"py-4",children:l}),(0,r.jsxs)("div",{className:"modal-action",children:[o&&(0,r.jsx)("button",{className:"btn",onClick:o,children:"확인"}),(0,r.jsx)("button",{className:"btn",onClick:s,children:"닫기"})]})]})]})};function p(e){let{isOpen:t,onClose:n,onConfirm:l}=e,o=(0,a.useRef)(null),i=(0,a.useRef)(null),c=(0,a.useRef)(null),u=(0,a.useRef)(null),d=(0,a.useRef)(null),m=(0,a.useRef)(null),[x,h]=(0,a.useState)(!1);return t?(0,r.jsxs)(f,{isOpen:t,onClose:n,outsideClickClose:!0,onConfirm:()=>{o.current&&i.current&&c.current&&c.current&&u.current&&d.current&&m.current&&(l({title:o.current.value,monthlyCharge:Number(i.current.value.replaceAll(/[^0-9]/g,"")),avgAnnualReturn:Number(c.current.value.replaceAll(/[^0-9]/g,"")),loanInterestRate:Number(d.current.value.replaceAll(/[^0-9]/g,"")),loanAmount:Number(u.current.value.replaceAll(/[^0-9]/g,"")),firstMoney:Number(m.current.value.replaceAll(/[^0-9]/g,"")),repaymentOfPrincipal:x}),n())},children:[(0,r.jsxs)("p",{children:["항목 :"," ",(0,r.jsx)("input",{className:"input max-w-[400px] rounded border border-gray-300 text-right text-black focus:outline-none",ref:o})]}),(0,r.jsxs)("p",{children:["월세 :"," ",(0,r.jsx)("input",{className:"input max-w-[400px] rounded border border-gray-300 text-right text-black focus:outline-none",ref:i,defaultValue:15e5})]}),(0,r.jsxs)("p",{children:["초기자산 :"," ",(0,r.jsx)("input",{className:"input max-w-[400px] rounded border border-gray-300 text-right text-black focus:outline-none",ref:m,defaultValue:22e8})]}),(0,r.jsxs)("p",{children:["연 수익률 :"," ",(0,r.jsx)("input",{className:"input max-w-[400px] rounded border border-gray-300 text-right text-black focus:outline-none",ref:c,defaultValue:.04})]}),(0,r.jsxs)("p",{children:["대출액 :"," ",(0,r.jsx)("input",{className:"input max-w-[400px] rounded border border-gray-300 text-right text-black focus:outline-none",ref:u,defaultValue:15e7})]}),(0,r.jsxs)("p",{children:["대출이자 :"," ",(0,r.jsx)("input",{className:"input max-w-[400px] rounded border border-gray-300 text-right text-black focus:outline-none",ref:d,defaultValue:.04})]}),(0,r.jsx)("div",{className:"w-[200px] text-left",children:(0,r.jsx)(s,{text:"원금상환",checked:x,onChange:e=>h(e)})})]}):null}function g(e){let{id:t,propName:n,value:l}=e,{changeLoanInfo:s}=(0,o.oR)(c),[i,u]=(0,a.useState)(!1),[d,m]=(0,a.useState)(l.toString());return(0,a.useEffect)(()=>{m(l.toString())},[l]),(0,r.jsx)(r.Fragment,{children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{className:"input max-w-[400px] text-right text-black focus:outline-none",value:d,onChange:e=>{m(e.target.value)}}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(x,{onClick:()=>{s(t,n,Number(d.replaceAll(/[^0-9.]/g,""))),u(!1)},children:"적용"}),(0,r.jsx)(x,{onClick:()=>{m(l.toString()),u(!1)},children:"취소"})]})]}):(0,r.jsx)("div",{onClick:()=>u(!0),children:d})})}function j(){let[e,t]=(0,a.useState)(!1),[n,i]=(0,a.useState)(!0),{addLoanInfo:d,deleteLoanInfo:f,loanList:j,fixedInfo:y,setFixedInfo:b}=(0,o.oR)(c),v=(0,a.useRef)([]),N=(0,u.Z)(()=>{let e=v.current.map(e=>Number(e.value.replace(/[^0-9.]/g,"")));b({income:e[0],outcome:e[1]})},800);return(0,r.jsxs)(r.Fragment,{children:[e&&(0,r.jsx)(p,{isOpen:e,onClose:()=>t(!1),onConfirm:e=>{d({id:Math.random().toString(),...e})}}),(0,r.jsx)(h,{startDate:m()("2024-06-01")}),(0,r.jsx)(l,{columns:[{title:"수입",key:"income",render:(e,t)=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:e=>{e&&(v.current[0]=e)},defaultValue:"".concat(t.income.toLocaleString()),className:"input max-w-[400px] text-right text-black focus:outline-none",onChange:N}),"원"]})},{title:"지출",key:"outcome",render:(e,t)=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{ref:e=>{e&&(v.current[1]=e)},defaultValue:"".concat(t.outcome.toLocaleString()),className:"input max-w-[400px] text-right text-black focus:outline-none",onChange:N}),"원(",t.outcome/t.income*100,"%)"]})}],contents:[y],renderKey:function(e){return JSON.stringify(e)}}),(0,r.jsx)("div",{className:"w-[15vw] text-left",children:(0,r.jsx)(s,{text:"이자지원",checked:n,onChange:e=>i(e)})}),(0,r.jsx)(x,{onClick:()=>t(!0),children:"추가하기"}),(0,r.jsx)(l,{columns:[{title:"항목",key:"title"},{title:"월세",key:"monthlyCharge",render:(e,t)=>(0,r.jsx)(g,{propName:"monthlyCharge",id:t.id,value:e})},{title:"대출금",key:"loanAmount",render:(e,t)=>(0,r.jsx)(g,{propName:"loanAmount",id:t.id,value:e})},{title:"대출이자",key:"loanInterestRate",render:(e,t)=>(0,r.jsx)(g,{propName:"loanInterestRate",id:t.id,value:e})},{title:"원리금",key:"principalAndInterest",render:(e,t)=>-((t.loanAmount*t.loanInterestRate/12+(t.repaymentOfPrincipal?t.loanAmount/480:0))*1)},{title:"현금자산",key:"firstMoney",render:(e,t)=>(0,r.jsx)(g,{propName:"firstMoney",id:t.id,value:e})},{title:"연 수익률",key:"avgAnnualReturn",render:(e,t)=>(0,r.jsx)(g,{propName:"avgAnnualReturn",id:t.id,value:e})},{title:"월간 자본 소득",key:"avgAnnualReturn",render:(e,t)=>t.firstMoney*t.avgAnnualReturn/12},{title:"월간 자금 변화",key:"monthlyOutcome",render(e,t){let l=y.income-y.outcome-t.monthlyCharge,a=t.firstMoney*t.avgAnnualReturn/12+l-(t.loanAmount*t.loanInterestRate/12+(t.repaymentOfPrincipal?t.loanAmount/480:0))+(n&&0!==t.loanAmount?(t.loanInterestRate-.02)*15e7/12:0);return(0,r.jsxs)(r.Fragment,{children:[a,"원"]})}},{title:"",key:"",render:(e,t)=>(0,r.jsx)(x,{onClick:()=>f(t.id),children:"삭제"})}],contents:j,renderKey:function(e){return JSON.stringify(e)}})]})}}},function(e){e.O(0,[246,888,774,179],function(){return e(e.s=8538)}),_N_E=e.O()}]);