<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({&#x27;gtm.start&#x27;:
new Date().getTime(),event:&#x27;gtm.js&#x27;});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!=&#x27;dataLayer&#x27;?&#x27;&amp;l=&#x27;+l:&#x27;&#x27;;j.async=true;j.src=
&#x27;https://www.googletagmanager.com/gtm.js?id=&#x27;+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,&#x27;script&#x27;,&#x27;dataLayer&#x27;,&#x27;GTM-K5DKF9QN&#x27;);</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.5.0/github-markdown-light.min.css" integrity="sha512-Pmhg2i/F7+5+7SsdoUqKeH7UAZoVMYb1sxGOoJ0jWXAEHP0XV2H4CITyK267eHWp2jpj7rtqWNkmEOw1tNyYpg==" crossorigin="anonymous" referrerPolicy="no-referrer"/><meta property="og:type" content="website"/><meta property="og:url" content="https://jparkk0517.github.io"/><meta property="og:title" content="github blog 구축기(2)"/><meta property="og:description" content="github page를 배포하는 과정을 알아보자"/><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/e471efda52e68c3f.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/e471efda52e68c3f.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/5c3da54741072322.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/5c3da54741072322.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-f4bb48ce88405231.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-550f72cae410482c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-e6e0b507836a963c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-85fa9e6e18f87a53.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/281-ba438958aa97dd96.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/posts/%5BpostId%5D-69b4b69adb4f631a.js" defer="" crossorigin=""></script><script src="/_next/static/Z9wYZ0GYlMZAHy5JkrNZa/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/Z9wYZ0GYlMZAHy5JkrNZa/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K5DKF9QN" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div class="h-screen"><div class="navbar bg-base-100 sticky top-0 z-10"><div class="flex-1"><a class="btn btn-ghost text-xl">SunBlog</a></div><div class="flex-none gap-2"><div class="form-control"><div class="join"><div><div><input class="input input-sm input-bordered join-item max-w-[30vw]" placeholder="" value=""/></div></div><select class="select select-bordered join-item select-sm"><option value="tag">키워드</option><option value="title" selected="">제목</option></select><div class="indicator"><button class="btn join-item btn-sm">조회</button></div></div></div></div></div><main class="prose p-4 align-baseline overflow-y-scroll h-[85vh]"><div class="mb-20"><div class="hero bg-base-300"><div class="hero-content text-center"><div class="max-w-md"><h1 class="text-5xl font-bold">github blog 구축기(2)</h1><p class="my-4">2024.02.05</p><div class="max-w-[80vw] break-words mb-4">github page를 배포하는 과정을 알아보자</div><div class="badge badge-outline mr-1">next.js</div><div class="badge badge-outline mr-1">github blog</div><div class="badge badge-outline mr-1">gh-pages</div><div class="badge badge-outline mr-1">mdx</div></div></div></div><div class="divider"></div><div class="markdown-body min-h-[58vh] px-6 max-w-[100vw]"><h1>블로그 글 작성 및 표출하는 방법은?</h1>
<ul>
<li>기본적으로 포스팅은 markdown으로 작성하도록 하고싶다.<ul>
<li>작성 과정에서 markdown으로 글을 확인하고, 그대로 표출되도록 하고싶기 때문</li>
</ul>
</li>
<li>별도 서버 없이 작성한 post markdown파일을 github에 저장하고, 그걸 그대로 표출 하고싶다.</li>
</ul>
<p>=&gt; mdx 파일로 작성하고, meta 정보를 parsing하여 글 목록에 표출하도록 하고, 표스팅 내용은 dynamic routing으로 확인할 수 있는 구조로 짜도록 하자!</p>
<p><img src="/posts/2024-02-05/240205-212509.png" alt="240205-212509">
그림1. src 폴더 하부 구조</p>
<p>기본적인 폴더 구조는 다음과 같이
/pages 폴더 밑에 [postId].tsx를 두어 dynamic routing이 가능하도록 했다.</p>
<h1>본격 github page 배포</h1>
<blockquote>
<p>gh-pages library를 사용!
<a href="https://www.npmjs.com/package/gh-pages">gh-pages npm repository</a></p>
</blockquote>
<p>github page에 내가 작성한 markdown을 포스팅으로 표출하기 위해
gh-pages를 활용하도록 하고 deploy 스크립트는 다음과 같이 짰다.</p>

    <div class="mockup-code border bg-[#f6f8fa]" style="width:90%;margin:auto;margin-bottom:20px;">
      <pre style="margin-bottom:0;padding:0;">
      <code>
 <span class="hljs-comment"># package.json</span>
 <span class="hljs-string">&quot;deploy&quot;</span>: <span class="hljs-string">&quot;next build &amp;&amp; touch out/.nojekyll &amp;&amp; gh-pages -d out --dotfiles&quot;</span>,</code>
      </pre>
    </div>
  <p>이제 yarn deploy 명령어를 통해<br> 연결한 git repository의 gh-pages 브랜치에 빌드된 결과물이 올라가게 된다.<br> 이때 github repository 설정에서 표출할 branch를 gh-pages로 변경시켜준다.</p>
<p><img src="/posts/2024-02-05/240205-213613.png" alt="240205-213613">
그림2. github repository settings</p>
<p><img src="/posts/2024-02-05/240205-213633.png" alt="240205-213633">
그림3. gh-pages 브랜치를 github page 메인브랜치로 이용하도록 변경</p>
<p>위와같이 설정했다면
yarn deploy 명령어를 통해 github page가 배포됨을 알 수 있다.</p>
</div><div class="flex justify-between mt-10 max-w-[100vw]"><button class="btn btn-8xl md:btn-md gap-2 lg:gap-3  w-[48%]"><svg class="h-6 w-6 fill-current md:h-8 md:w-8" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"></path></svg><span class="w-[70%] overflow-hidden text-xs">github blog 구축기(1)</span></button><button class="btn btn-8xl md:btn-md gap-2 lg:gap-3  w-[48%]"><span class="w-[70%] overflow-hidden  text-xs">github blog 구축기(3)</span><svg class="h-6 w-6 fill-current md:h-8 md:w-8" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"></path></svg></button></div></div><div class="drawer absolute left-5 z-30 w-0 bottom-[10vh]"><input id="my-drawer" type="checkbox" class="drawer-toggle"/><div class="drawer-content"><label class="btn btn-circle swap swap-rotate" for="my-drawer"><input type="checkbox"/><svg class="swap-off fill-current" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512"><path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"></path></svg><svg class="swap-on fill-current" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 512 512"><polygon points="400 145.49 366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49"></polygon></svg></label></div><div class="drawer-side"><label for="my-drawer" aria-label="close sidebar" class="drawer-overlay"></label><ul class="menu p-4 w-50 min-h-full bg-base-200 text-base-content"><li><a>Sun, 누구냐 너</a></li></ul></div></div></main><footer class="footer footer-center p-4 bg-base-100 text-base-content w-screen"><aside><p>Copyright © 2024 - sun</p></aside></footer></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"prev":{"meta":{"title":"github blog 구축기(1)","desc":"깃헙 블로그 제작과 프레임워크의 선택","date":"2024.02.04","tags":["next.js","github blog","gh-pages","mdx","깃헙 블로그"]},"content":"\n# 왜 깃헙 블로그로 이사를 했나\n\n이전에는 notion을 썼다. 노션 자체 기능도 많고, 글 작성도 편리했지만  \n 직접 react로 블로그를 꾸미고, 기능을 추가하는것도 재밌을것 같아 이사를 결심했다.\n\n## 깃헙 블로그 제작을 위해 고려했던것\n\n- static site로 제작하여 별도의 서버구축이 필요없어야 한다.\n- React 문법을 활용하여 작성이 편리하고, 향후 확장에도 용이해야 한다.\n- markdown을 이용해 작성이 가능하고, 표출이 되어야 한다.\n\n## 프레임워크의 선택\n\n깃험블로그를 찾아보니 next.js 와 gatsby 두가지 프레임워크를 많이 채택하는듯 했다.\n사실 두가지를 보자마자 next.js로 구축하고 싶었다.\n애초에 next.js는 익숙하기도 하고, 별다른 러닝커브 없이 빠르게 구축하고 싶었기 때문이다.\n\n따라서 next.js로 선택!\n\n# 본격적 깃헙페이지 제작\n\n## github page 생성\n\n깃헙페이지는 https://{깃헙아이디}.github.io 형태로 이용 할 수 있다.  \n따라서 이 이름으로 repository를 생성한다.\n\n![240203-225036](/posts/2024-02-04/240203-225036.png)  \n( 깃헙아이디 ).github.io 로 레포지토리 생성!!\n\n## next.js 생성 및 설정\n\n```bash\n$ npx create-next-app@latest\n```\n\n```mjs\n// next.config.mjs\nimport createMDX from '@next/mdx';\n\n/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  // static page들로만 구성하도록 하기 위해 export 설정 추가\n  output: 'export',\n  // github page는 정적 페이지로 구성되기때문에 image에 대하 optimized를 꺼준다\n  images: {\n    unoptimized: false,\n  },\n  assetPrefix: '/',\n  pageExtensions: ['js', 'jsx', 'ts', 'tsx', 'md', 'mdx'],\n};\n\nconst withMDX = createMDX();\n\nexport default withMDX(nextConfig);\n```\n\n위와같이 설정하면 기본적으로 github page에 정적 페이지로 표출될 수 있는 기본 설정이 마무리된다.\n","fileName":"2024-02-04","route":"2024-02-04"},"post":{"meta":{"title":"github blog 구축기(2)","desc":"github page를 배포하는 과정을 알아보자","date":"2024.02.05","tags":["next.js","github blog","gh-pages","mdx"]},"content":"\n# 블로그 글 작성 및 표출하는 방법은?\n\n- 기본적으로 포스팅은 markdown으로 작성하도록 하고싶다.\n  - 작성 과정에서 markdown으로 글을 확인하고, 그대로 표출되도록 하고싶기 때문\n- 별도 서버 없이 작성한 post markdown파일을 github에 저장하고, 그걸 그대로 표출 하고싶다.\n\n=\u003e mdx 파일로 작성하고, meta 정보를 parsing하여 글 목록에 표출하도록 하고, 표스팅 내용은 dynamic routing으로 확인할 수 있는 구조로 짜도록 하자!\n\n![240205-212509](/posts/2024-02-05/240205-212509.png)\n그림1. src 폴더 하부 구조\n\n기본적인 폴더 구조는 다음과 같이\n/pages 폴더 밑에 [postId].tsx를 두어 dynamic routing이 가능하도록 했다.\n\n# 본격 github page 배포\n\n\u003e gh-pages library를 사용!\n\u003e [gh-pages npm repository](https://www.npmjs.com/package/gh-pages)\n\ngithub page에 내가 작성한 markdown을 포스팅으로 표출하기 위해\ngh-pages를 활용하도록 하고 deploy 스크립트는 다음과 같이 짰다.\n\n```bash\n # package.json\n \"deploy\": \"next build \u0026\u0026 touch out/.nojekyll \u0026\u0026 gh-pages -d out --dotfiles\",\n```\n\n이제 yarn deploy 명령어를 통해  \n 연결한 git repository의 gh-pages 브랜치에 빌드된 결과물이 올라가게 된다.  \n 이때 github repository 설정에서 표출할 branch를 gh-pages로 변경시켜준다.\n\n![240205-213613](/posts/2024-02-05/240205-213613.png)\n그림2. github repository settings\n\n![240205-213633](/posts/2024-02-05/240205-213633.png)\n그림3. gh-pages 브랜치를 github page 메인브랜치로 이용하도록 변경\n\n위와같이 설정했다면\nyarn deploy 명령어를 통해 github page가 배포됨을 알 수 있다.\n","fileName":"2024-02-05","route":"2024-02-05"},"next":{"meta":{"title":"github blog 구축기(3)","desc":"mdx를 이용한 포스팅 작성","date":"2024.02.06","tags":["next.js","github blog","gh-pages","mdx"]},"content":"\n# 포스팅의 meta정보 입력\n\n- 포스팅의 meta정보를 통해 포스트 리스트 표출시 정보를 표출해야 한다.\n\n![240207-232027](/posts/2024-02-06/240207-232027.png)\n그림1. .mdx 의 meta정보\n\n\u003e getStaticProps로 post가져오기\n\n```typescript\nimport fs from 'fs';\nimport matter from 'gray-matter';\nimport path from 'path';\n\nexport function getPostIds() {\n  const files = fs\n    .readdirSync(path.join('posts'))\n    .filter((filename) =\u003e filename.endsWith('.mdx'))\n    .map((filename) =\u003e filename.replaceAll('.mdx', ''));\n  return files;\n}\n\nexport function getPostById(postId: string) {\n  const markdownWithMeta = fs.readFileSync(\n    path.join('posts', postId + '.mdx'),\n    'utf-8'\n  );\n  const { data: meta, content } = matter(markdownWithMeta);\n  return {\n    meta: {\n      title: meta['title'] ?? '',\n      desc: meta['desc'] ?? '',\n      date: meta['date'] ?? '',\n      tags: meta['tags'] ?? [],\n    },\n    content,\n    fileName: postId,\n    route: postId,\n  };\n}\n\nexport const getStaticProps: GetStaticProps = async ({ params }) =\u003e {\n  const { postId = '' } = params ?? { postId: '' };\n  const postIds = getPostIds();\n  const idx = postIds.findIndex((_postId) =\u003e postId === _postId);\n  let prev = null,\n    post = null,\n    next = null;\n  for (let i = 0; i \u003c postIds.length; i++) {\n    const _postId = postIds[i];\n    if (_postId === postId) {\n      prev = i === 0 ? null : getPostById(postIds[i - 1]);\n      post = getPostById(_postId);\n      next = i + 1 === postIds.length ? null : getPostById(postIds[i + 1]);\n      break;\n    }\n  }\n\n  return {\n    props: {\n      prev,\n      post,\n      next,\n    },\n  };\n};\n```\n\nroot folder에 posts 폴더를 만들고 그 내부에 포스트들을 mdx파일로 생성하고, 그 파일들을 읽도록 했다.\n![240208-020424](/posts/2024-02-06/240208-020424.png)\n그림2. folder 구조 및 posts 폴더\n\n이때 폴더명은 포스트가 작성된 날짜를 기준으로 했고, 그 날짜는 mdx 내부에 적어놓은 meta와 동일하게 맞추었다.\n","fileName":"2024-02-06","route":"2024-02-06"}},"__N_SSG":true},"page":"/posts/[postId]","query":{"postId":"2024-02-05"},"buildId":"Z9wYZ0GYlMZAHy5JkrNZa","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>